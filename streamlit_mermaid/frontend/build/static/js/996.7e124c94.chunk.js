"use strict";(self.webpackChunkmermaid_viewer=self.webpackChunkmermaid_viewer||[]).push([[996],{5375:function(e,t,n){function a(e,t){var n,a,i;e.accDescr&&(null===(n=t.setAccDescription)||void 0===n||n.call(t,e.accDescr));e.accTitle&&(null===(a=t.setAccTitle)||void 0===a||a.call(t,e.accTitle));e.title&&(null===(i=t.setDiagramTitle)||void 0===i||i.call(t,e.title))}n.d(t,{A:function(){return a}}),(0,n(1025).eW)(a,"populateCommonDb")},996:function(e,t,n){n.r(t),n.d(t,{diagram:function(){return M}});var a=n(9439),i=n(3433),r=n(4165),c=n(5861),o=n(6680),l=n(5375),u=n(8535),s=n(6699),p=n(1025),d=n(1529),f=n(7901),v=s.vZ.pie,h={sections:new Map,showData:!1,config:v},g=h.sections,m=h.showData,w=structuredClone(v),x=(0,p.eW)((function(){return structuredClone(w)}),"getConfig"),S=(0,p.eW)((function(){g=new Map,m=h.showData,(0,s.ZH)()}),"clear"),b=(0,p.eW)((function(e){var t=e.label,n=e.value;if(n<0)throw new Error('"'.concat(t,'" has invalid value: ').concat(n,". Negative values are not allowed in pie charts. All slice values must be >= 0."));g.has(t)||(g.set(t,n),p.cM.debug("added new section: ".concat(t,", with value: ").concat(n)))}),"addSection"),D=(0,p.eW)((function(){return g}),"getSections"),T=(0,p.eW)((function(e){m=e}),"setShowData"),y=(0,p.eW)((function(){return m}),"getShowData"),C={getConfig:x,clear:S,setDiagramTitle:s.g2,getDiagramTitle:s.Kr,setAccTitle:s.GN,getAccTitle:s.eu,setAccDescription:s.U$,getAccDescription:s.Mx,addSection:b,getSections:D,setShowData:T,getShowData:y},W=(0,p.eW)((function(e,t){(0,l.A)(e,t),t.setShowData(e.showData),e.sections.map(t.addSection)}),"populateDb"),k={parse:(0,p.eW)(function(){var e=(0,c.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.Qc)("pie",t);case 2:n=e.sent,p.cM.debug(n),W(n,C);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"parse")},A=(0,p.eW)((function(e){return"\n  .pieCircle{\n    stroke: ".concat(e.pieStrokeColor,";\n    stroke-width : ").concat(e.pieStrokeWidth,";\n    opacity : ").concat(e.pieOpacity,";\n  }\n  .pieOuterCircle{\n    stroke: ").concat(e.pieOuterStrokeColor,";\n    stroke-width: ").concat(e.pieOuterStrokeWidth,";\n    fill: none;\n  }\n  .pieTitleText {\n    text-anchor: middle;\n    font-size: ").concat(e.pieTitleTextSize,";\n    fill: ").concat(e.pieTitleTextColor,";\n    font-family: ").concat(e.fontFamily,";\n  }\n  .slice {\n    font-family: ").concat(e.fontFamily,";\n    fill: ").concat(e.pieSectionTextColor,";\n    font-size:").concat(e.pieSectionTextSize,";\n    // fill: white;\n  }\n  .legend text {\n    fill: ").concat(e.pieLegendTextColor,";\n    font-family: ").concat(e.fontFamily,";\n    font-size: ").concat(e.pieLegendTextSize,";\n  }\n")}),"getStyles"),Z=(0,p.eW)((function(e){var t=(0,i.Z)(e.values()).reduce((function(e,t){return e+t}),0),n=(0,i.Z)(e.entries()).map((function(e){var t=(0,a.Z)(e,2);return{label:t[0],value:t[1]}})).filter((function(e){return e.value/t*100>=1})).sort((function(e,t){return t.value-e.value}));return(0,f.ve8)().value((function(e){return e.value}))(n)}),"createPieArcs"),M={parser:k,db:C,renderer:{draw:(0,p.eW)((function(e,t,n,r){var c;p.cM.debug("rendering pie chart\n"+e);var l=r.db,d=(0,s.nV)(),v=(0,u.Rb)(l.getConfig(),d.pie),h=18,g=450,m=(0,o.P)(t),w=m.append("g");w.attr("transform","translate(225,225)");var x=d.themeVariables,S=(0,u.VG)(x.pieOuterStrokeWidth),b=(0,a.Z)(S,1)[0];null!==(c=b)&&void 0!==c||(b=2);var D=v.textPosition,T=Math.min(450,g)/2-40,y=(0,f.Nb1)().innerRadius(0).outerRadius(T),C=(0,f.Nb1)().innerRadius(T*D).outerRadius(T*D);w.append("circle").attr("cx",0).attr("cy",0).attr("r",T+b/2).attr("class","pieOuterCircle");var W=l.getSections(),k=Z(W),A=[x.pie1,x.pie2,x.pie3,x.pie4,x.pie5,x.pie6,x.pie7,x.pie8,x.pie9,x.pie10,x.pie11,x.pie12],M=0;W.forEach((function(e){M+=e}));var z=k.filter((function(e){return"0"!==(e.data.value/M*100).toFixed(0)})),O=(0,f.PKp)(A);w.selectAll("mySlices").data(z).enter().append("path").attr("d",y).attr("fill",(function(e){return O(e.data.label)})).attr("class","pieCircle"),w.selectAll("mySlices").data(z).enter().append("text").text((function(e){return(e.data.value/M*100).toFixed(0)+"%"})).attr("transform",(function(e){return"translate("+C.centroid(e)+")"})).style("text-anchor","middle").attr("class","slice"),w.append("text").text(l.getDiagramTitle()).attr("x",0).attr("y",-200).attr("class","pieTitleText");var R=(0,i.Z)(W.entries()).map((function(e){var t=(0,a.Z)(e,2);return{label:t[0],value:t[1]}})),F=w.selectAll(".legend").data(R).enter().append("g").attr("class","legend").attr("transform",(function(e,t){return"translate(216,"+(22*t-22*R.length/2)+")"}));F.append("rect").attr("width",h).attr("height",h).style("fill",(function(e){return O(e.label)})).style("stroke",(function(e){return O(e.label)})),F.append("text").attr("x",22).attr("y",14).text((function(e){return l.getShowData()?"".concat(e.label," [").concat(e.value,"]"):e.label}));var N=512+Math.max.apply(Math,(0,i.Z)(F.selectAll("text").nodes().map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.getBoundingClientRect().width)&&void 0!==t?t:0}))));m.attr("viewBox","0 0 ".concat(N," ").concat(g)),(0,s.v2)(m,g,N,v.useMaxWidth)}),"draw")},styles:A}}}]);
//# sourceMappingURL=996.7e124c94.chunk.js.map