"use strict";(self.webpackChunkmermaid_viewer=self.webpackChunkmermaid_viewer||[]).push([[135],{9738:function(t,e,r){r.d(e,{k:function(){return k}});var n=r(5671),a=r(3144),i=r(174),s=r(9884),o=r(7731),c=r(3863),l=r(790),d=r(5633),u=r(2790),h=r(7355),p=r(6875),g=r(8445),y=r(4341),f=(0,p.Z)((function(t){return(0,g.Z)((0,h.Z)(t,1,y.Z,!0))})),x=r(2979),b=r(5906),v="\0",m="\0",w="\x01",k=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.Z)(this,t),this._isDirected=!Object.prototype.hasOwnProperty.call(e,"directed")||e.directed,this._isMultigraph=!!Object.prototype.hasOwnProperty.call(e,"multigraph")&&e.multigraph,this._isCompound=!!Object.prototype.hasOwnProperty.call(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=i.Z(void 0),this._defaultEdgeLabelFn=i.Z(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[m]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}return(0,a.Z)(t,[{key:"isDirected",value:function(){return this._isDirected}},{key:"isMultigraph",value:function(){return this._isMultigraph}},{key:"isCompound",value:function(){return this._isCompound}},{key:"setGraph",value:function(t){return this._label=t,this}},{key:"graph",value:function(){return this._label}},{key:"setDefaultNodeLabel",value:function(t){return s.Z(t)||(t=i.Z(t)),this._defaultNodeLabelFn=t,this}},{key:"nodeCount",value:function(){return this._nodeCount}},{key:"nodes",value:function(){return o.Z(this._nodes)}},{key:"sources",value:function(){var t=this;return c.Z(this.nodes(),(function(e){return l.Z(t._in[e])}))}},{key:"sinks",value:function(){var t=this;return c.Z(this.nodes(),(function(e){return l.Z(t._out[e])}))}},{key:"setNodes",value:function(t,e){var r=arguments,n=this;return d.Z(t,(function(t){r.length>1?n.setNode(t,e):n.setNode(t)})),this}},{key:"setNode",value:function(t,e){return Object.prototype.hasOwnProperty.call(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=m,this._children[t]={},this._children[m][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)}},{key:"node",value:function(t){return this._nodes[t]}},{key:"hasNode",value:function(t){return Object.prototype.hasOwnProperty.call(this._nodes,t)}},{key:"removeNode",value:function(t){var e=this;if(Object.prototype.hasOwnProperty.call(this._nodes,t)){var r=function(t){return e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],d.Z(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),d.Z(o.Z(this._in[t]),r),delete this._in[t],delete this._preds[t],d.Z(o.Z(this._out[t]),r),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}},{key:"setParent",value:function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(u.Z(e))e=m;else{for(var r=e+="";!u.Z(r);r=this.parent(r))if(r===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this}},{key:"_removeFromParentsChildList",value:function(t){delete this._children[this._parent[t]][t]}},{key:"parent",value:function(t){if(this._isCompound){var e=this._parent[t];if(e!==m)return e}}},{key:"children",value:function(t){if(u.Z(t)&&(t=m),this._isCompound){var e=this._children[t];if(e)return o.Z(e)}else{if(t===m)return this.nodes();if(this.hasNode(t))return[]}}},{key:"predecessors",value:function(t){var e=this._preds[t];if(e)return o.Z(e)}},{key:"successors",value:function(t){var e=this._sucs[t];if(e)return o.Z(e)}},{key:"neighbors",value:function(t){var e=this.predecessors(t);if(e)return f(e,this.successors(t))}},{key:"isLeaf",value:function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length}},{key:"filterNodes",value:function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var r=this;d.Z(this._nodes,(function(r,n){t(n)&&e.setNode(n,r)})),d.Z(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,r.edge(t))}));var n={};function a(t){var i=r.parent(t);return void 0===i||e.hasNode(i)?(n[t]=i,i):i in n?n[i]:a(i)}return this._isCompound&&d.Z(e.nodes(),(function(t){e.setParent(t,a(t))})),e}},{key:"setDefaultEdgeLabel",value:function(t){return s.Z(t)||(t=i.Z(t)),this._defaultEdgeLabelFn=t,this}},{key:"edgeCount",value:function(){return this._edgeCount}},{key:"edges",value:function(){return x.Z(this._edgeObjs)}},{key:"setPath",value:function(t,e){var r=this,n=arguments;return b.Z(t,(function(t,a){return n.length>1?r.setEdge(t,a,e):r.setEdge(t,a),a})),this}},{key:"setEdge",value:function(){var t,e,r,n,a=!1,i=arguments[0];"object"===typeof i&&null!==i&&"v"in i?(t=i.v,e=i.w,r=i.name,2===arguments.length&&(n=arguments[1],a=!0)):(t=i,e=arguments[1],r=arguments[3],arguments.length>2&&(n=arguments[2],a=!0)),t=""+t,e=""+e,u.Z(r)||(r=""+r);var s=S(this._isDirected,t,e,r);if(Object.prototype.hasOwnProperty.call(this._edgeLabels,s))return a&&(this._edgeLabels[s]=n),this;if(!u.Z(r)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[s]=a?n:this._defaultEdgeLabelFn(t,e,r);var o=function(t,e,r,n){var a=""+e,i=""+r;if(!t&&a>i){var s=a;a=i,i=s}var o={v:a,w:i};n&&(o.name=n);return o}(this._isDirected,t,e,r);return t=o.v,e=o.w,Object.freeze(o),this._edgeObjs[s]=o,_(this._preds[e],t),_(this._sucs[t],e),this._in[e][s]=o,this._out[t][s]=o,this._edgeCount++,this}},{key:"edge",value:function(t,e,r){var n=1===arguments.length?E(this._isDirected,arguments[0]):S(this._isDirected,t,e,r);return this._edgeLabels[n]}},{key:"hasEdge",value:function(t,e,r){var n=1===arguments.length?E(this._isDirected,arguments[0]):S(this._isDirected,t,e,r);return Object.prototype.hasOwnProperty.call(this._edgeLabels,n)}},{key:"removeEdge",value:function(t,e,r){var n=1===arguments.length?E(this._isDirected,arguments[0]):S(this._isDirected,t,e,r),a=this._edgeObjs[n];return a&&(t=a.v,e=a.w,delete this._edgeLabels[n],delete this._edgeObjs[n],L(this._preds[e],t),L(this._sucs[t],e),delete this._in[e][n],delete this._out[t][n],this._edgeCount--),this}},{key:"inEdges",value:function(t,e){var r=this._in[t];if(r){var n=x.Z(r);return e?c.Z(n,(function(t){return t.v===e})):n}}},{key:"outEdges",value:function(t,e){var r=this._out[t];if(r){var n=x.Z(r);return e?c.Z(n,(function(t){return t.w===e})):n}}},{key:"nodeEdges",value:function(t,e){var r=this.inEdges(t,e);if(r)return r.concat(this.outEdges(t,e))}}]),t}();function _(t,e){t[e]?t[e]++:t[e]=1}function L(t,e){--t[e]||delete t[e]}function S(t,e,r,n){var a=""+e,i=""+r;if(!t&&a>i){var s=a;a=i,i=s}return a+w+i+w+(u.Z(n)?v:n)}function E(t,e){return S(t,e.v,e.w,e.name)}k.prototype._nodeCount=0,k.prototype._edgeCount=0},8433:function(t,e,r){r.d(e,{k:function(){return n.k}});var n=r(9738)},2249:function(t,e,r){var n=r(6046),a=r(6697);e.Z=function(t,e){return n.Z.lang.round(a.Z.parse(t)[e])}},4254:function(t,e,r){var n=r(680);e.Z=function(t){return(0,n.Z)(t,4)}},5135:function(t,e,r){r.r(e),r.d(e,{diagram:function(){return Re}});var n,a,i=r(4165),s=r(5861),o=r(3433),c=r(7762),l=r(1413),d=r(6758),u=r(9473),h=r(1278),p=r(2943),g=r(8535),y=r(6699),f=r(1025),x=r(4254),b=r(2249),v=r(6896),m=r(7901),w=r(8433),k=function(){var t=(0,f.eW)((function(t,e,r,n){for(r=r||{},n=t.length;n--;r[t[n]]=e);return r}),"o"),e=[1,15],r=[1,7],n=[1,13],a=[1,14],i=[1,19],s=[1,16],o=[1,17],c=[1,18],d=[8,30],u=[8,10,21,28,29,30,31,39,43,46],h=[1,23],p=[1,24],g=[8,10,15,16,21,28,29,30,31,39,43,46],y=[8,10,15,16,21,27,28,29,30,31,39,43,46],x=[1,49],b={trace:(0,f.eW)((function(){}),"trace"),yy:{},symbols_:{error:2,spaceLines:3,SPACELINE:4,NL:5,separator:6,SPACE:7,EOF:8,start:9,BLOCK_DIAGRAM_KEY:10,document:11,stop:12,statement:13,link:14,LINK:15,START_LINK:16,LINK_LABEL:17,STR:18,nodeStatement:19,columnsStatement:20,SPACE_BLOCK:21,blockStatement:22,classDefStatement:23,cssClassStatement:24,styleStatement:25,node:26,SIZE:27,COLUMNS:28,"id-block":29,end:30,NODE_ID:31,nodeShapeNLabel:32,dirList:33,DIR:34,NODE_DSTART:35,NODE_DEND:36,BLOCK_ARROW_START:37,BLOCK_ARROW_END:38,classDef:39,CLASSDEF_ID:40,CLASSDEF_STYLEOPTS:41,DEFAULT:42,class:43,CLASSENTITY_IDS:44,STYLECLASS:45,style:46,STYLE_ENTITY_IDS:47,STYLE_DEFINITION_DATA:48,$accept:0,$end:1},terminals_:{2:"error",4:"SPACELINE",5:"NL",7:"SPACE",8:"EOF",10:"BLOCK_DIAGRAM_KEY",15:"LINK",16:"START_LINK",17:"LINK_LABEL",18:"STR",21:"SPACE_BLOCK",27:"SIZE",28:"COLUMNS",29:"id-block",30:"end",31:"NODE_ID",34:"DIR",35:"NODE_DSTART",36:"NODE_DEND",37:"BLOCK_ARROW_START",38:"BLOCK_ARROW_END",39:"classDef",40:"CLASSDEF_ID",41:"CLASSDEF_STYLEOPTS",42:"DEFAULT",43:"class",44:"CLASSENTITY_IDS",45:"STYLECLASS",46:"style",47:"STYLE_ENTITY_IDS",48:"STYLE_DEFINITION_DATA"},productions_:[0,[3,1],[3,2],[3,2],[6,1],[6,1],[6,1],[9,3],[12,1],[12,1],[12,2],[12,2],[11,1],[11,2],[14,1],[14,4],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[19,3],[19,2],[19,1],[20,1],[22,4],[22,3],[26,1],[26,2],[33,1],[33,2],[32,3],[32,4],[23,3],[23,3],[24,3],[25,3]],performAction:(0,f.eW)((function(t,e,r,n,a,i,s){var o=i.length-1;switch(a){case 4:n.getLogger().debug("Rule: separator (NL) ");break;case 5:n.getLogger().debug("Rule: separator (Space) ");break;case 6:n.getLogger().debug("Rule: separator (EOF) ");break;case 7:n.getLogger().debug("Rule: hierarchy: ",i[o-1]),n.setHierarchy(i[o-1]);break;case 8:n.getLogger().debug("Stop NL ");break;case 9:n.getLogger().debug("Stop EOF ");break;case 10:n.getLogger().debug("Stop NL2 ");break;case 11:n.getLogger().debug("Stop EOF2 ");break;case 12:n.getLogger().debug("Rule: statement: ",i[o]),"number"===typeof i[o].length?this.$=i[o]:this.$=[i[o]];break;case 13:n.getLogger().debug("Rule: statement #2: ",i[o-1]),this.$=[i[o-1]].concat(i[o]);break;case 14:n.getLogger().debug("Rule: link: ",i[o],t),this.$={edgeTypeStr:i[o],label:""};break;case 15:n.getLogger().debug("Rule: LABEL link: ",i[o-3],i[o-1],i[o]),this.$={edgeTypeStr:i[o],label:i[o-1]};break;case 18:var c=parseInt(i[o]),d=n.generateId();this.$={id:d,type:"space",label:"",width:c,children:[]};break;case 23:n.getLogger().debug("Rule: (nodeStatement link node) ",i[o-2],i[o-1],i[o]," typestr: ",i[o-1].edgeTypeStr);var u=n.edgeStrToEdgeData(i[o-1].edgeTypeStr);this.$=[{id:i[o-2].id,label:i[o-2].label,type:i[o-2].type,directions:i[o-2].directions},{id:i[o-2].id+"-"+i[o].id,start:i[o-2].id,end:i[o].id,label:i[o-1].label,type:"edge",directions:i[o].directions,arrowTypeEnd:u,arrowTypeStart:"arrow_open"},{id:i[o].id,label:i[o].label,type:n.typeStr2Type(i[o].typeStr),directions:i[o].directions}];break;case 24:n.getLogger().debug("Rule: nodeStatement (abc88 node size) ",i[o-1],i[o]),this.$={id:i[o-1].id,label:i[o-1].label,type:n.typeStr2Type(i[o-1].typeStr),directions:i[o-1].directions,widthInColumns:parseInt(i[o],10)};break;case 25:n.getLogger().debug("Rule: nodeStatement (node) ",i[o]),this.$={id:i[o].id,label:i[o].label,type:n.typeStr2Type(i[o].typeStr),directions:i[o].directions,widthInColumns:1};break;case 26:n.getLogger().debug("APA123",this?this:"na"),n.getLogger().debug("COLUMNS: ",i[o]),this.$={type:"column-setting",columns:"auto"===i[o]?-1:parseInt(i[o])};break;case 27:n.getLogger().debug("Rule: id-block statement : ",i[o-2],i[o-1]);n.generateId();this.$=(0,l.Z)((0,l.Z)({},i[o-2]),{},{type:"composite",children:i[o-1]});break;case 28:n.getLogger().debug("Rule: blockStatement : ",i[o-2],i[o-1],i[o]);var h=n.generateId();this.$={id:h,type:"composite",label:"",children:i[o-1]};break;case 29:n.getLogger().debug("Rule: node (NODE_ID separator): ",i[o]),this.$={id:i[o]};break;case 30:n.getLogger().debug("Rule: node (NODE_ID nodeShapeNLabel separator): ",i[o-1],i[o]),this.$={id:i[o-1],label:i[o].label,typeStr:i[o].typeStr,directions:i[o].directions};break;case 31:n.getLogger().debug("Rule: dirList: ",i[o]),this.$=[i[o]];break;case 32:n.getLogger().debug("Rule: dirList: ",i[o-1],i[o]),this.$=[i[o-1]].concat(i[o]);break;case 33:n.getLogger().debug("Rule: nodeShapeNLabel: ",i[o-2],i[o-1],i[o]),this.$={typeStr:i[o-2]+i[o],label:i[o-1]};break;case 34:n.getLogger().debug("Rule: BLOCK_ARROW nodeShapeNLabel: ",i[o-3],i[o-2]," #3:",i[o-1],i[o]),this.$={typeStr:i[o-3]+i[o],label:i[o-2],directions:i[o-1]};break;case 35:case 36:this.$={type:"classDef",id:i[o-1].trim(),css:i[o].trim()};break;case 37:this.$={type:"applyClass",id:i[o-1].trim(),styleClass:i[o].trim()};break;case 38:this.$={type:"applyStyles",id:i[o-1].trim(),stylesStr:i[o].trim()}}}),"anonymous"),table:[{9:1,10:[1,2]},{1:[3]},{10:e,11:3,13:4,19:5,20:6,21:r,22:8,23:9,24:10,25:11,26:12,28:n,29:a,31:i,39:s,43:o,46:c},{8:[1,20]},t(d,[2,12],{13:4,19:5,20:6,22:8,23:9,24:10,25:11,26:12,11:21,10:e,21:r,28:n,29:a,31:i,39:s,43:o,46:c}),t(u,[2,16],{14:22,15:h,16:p}),t(u,[2,17]),t(u,[2,18]),t(u,[2,19]),t(u,[2,20]),t(u,[2,21]),t(u,[2,22]),t(g,[2,25],{27:[1,25]}),t(u,[2,26]),{19:26,26:12,31:i},{10:e,11:27,13:4,19:5,20:6,21:r,22:8,23:9,24:10,25:11,26:12,28:n,29:a,31:i,39:s,43:o,46:c},{40:[1,28],42:[1,29]},{44:[1,30]},{47:[1,31]},t(y,[2,29],{32:32,35:[1,33],37:[1,34]}),{1:[2,7]},t(d,[2,13]),{26:35,31:i},{31:[2,14]},{17:[1,36]},t(g,[2,24]),{10:e,11:37,13:4,14:22,15:h,16:p,19:5,20:6,21:r,22:8,23:9,24:10,25:11,26:12,28:n,29:a,31:i,39:s,43:o,46:c},{30:[1,38]},{41:[1,39]},{41:[1,40]},{45:[1,41]},{48:[1,42]},t(y,[2,30]),{18:[1,43]},{18:[1,44]},t(g,[2,23]),{18:[1,45]},{30:[1,46]},t(u,[2,28]),t(u,[2,35]),t(u,[2,36]),t(u,[2,37]),t(u,[2,38]),{36:[1,47]},{33:48,34:x},{15:[1,50]},t(u,[2,27]),t(y,[2,33]),{38:[1,51]},{33:52,34:x,38:[2,31]},{31:[2,15]},t(y,[2,34]),{38:[2,32]}],defaultActions:{20:[2,7],23:[2,14],50:[2,15],52:[2,32]},parseError:(0,f.eW)((function(t,e){if(!e.recoverable){var r=new Error(t);throw r.hash=e,r}this.trace(t)}),"parseError"),parse:(0,f.eW)((function(t){var e=this,r=[0],n=[],a=[null],i=[],s=this.table,o="",c=0,l=0,d=0,u=i.slice.call(arguments,1),h=Object.create(this.lexer),p={yy:{}};for(var g in this.yy)Object.prototype.hasOwnProperty.call(this.yy,g)&&(p.yy[g]=this.yy[g]);h.setInput(t,p.yy),p.yy.lexer=h,p.yy.parser=this,"undefined"==typeof h.yylloc&&(h.yylloc={});var y=h.yylloc;i.push(y);var x=h.options&&h.options.ranges;function b(){var t;return"number"!==typeof(t=n.pop()||h.lex()||1)&&(t instanceof Array&&(t=(n=t).pop()),t=e.symbols_[t]||t),t}"function"===typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,(0,f.eW)((function(t){r.length=r.length-2*t,a.length=a.length-t,i.length=i.length-t}),"popStack"),(0,f.eW)(b,"lex");for(var v,m,w,k,_,L,S,E,Z,W={};;){if(w=r[r.length-1],this.defaultActions[w]?k=this.defaultActions[w]:(null!==v&&"undefined"!=typeof v||(v=b()),k=s[w]&&s[w][v]),"undefined"===typeof k||!k.length||!k[0]){var C="";for(L in Z=[],s[w])this.terminals_[L]&&L>2&&Z.push("'"+this.terminals_[L]+"'");C=h.showPosition?"Parse error on line "+(c+1)+":\n"+h.showPosition()+"\nExpecting "+Z.join(", ")+", got '"+(this.terminals_[v]||v)+"'":"Parse error on line "+(c+1)+": Unexpected "+(1==v?"end of input":"'"+(this.terminals_[v]||v)+"'"),this.parseError(C,{text:h.match,token:this.terminals_[v]||v,line:h.yylineno,loc:y,expected:Z})}if(k[0]instanceof Array&&k.length>1)throw new Error("Parse Error: multiple actions possible at state: "+w+", token: "+v);switch(k[0]){case 1:r.push(v),a.push(h.yytext),i.push(h.yylloc),r.push(k[1]),v=null,m?(v=m,m=null):(l=h.yyleng,o=h.yytext,c=h.yylineno,y=h.yylloc,d>0&&d--);break;case 2:if(S=this.productions_[k[1]][1],W.$=a[a.length-S],W._$={first_line:i[i.length-(S||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(S||1)].first_column,last_column:i[i.length-1].last_column},x&&(W._$.range=[i[i.length-(S||1)].range[0],i[i.length-1].range[1]]),"undefined"!==typeof(_=this.performAction.apply(W,[o,l,c,p.yy,k[1],a,i].concat(u))))return _;S&&(r=r.slice(0,-1*S*2),a=a.slice(0,-1*S),i=i.slice(0,-1*S)),r.push(this.productions_[k[1]][0]),a.push(W.$),i.push(W._$),E=s[r[r.length-2]][r[r.length-1]],r.push(E);break;case 3:return!0}}return!0}),"parse")},v=function(){return{EOF:1,parseError:(0,f.eW)((function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)}),"parseError"),setInput:(0,f.eW)((function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:(0,f.eW)((function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t}),"input"),unput:(0,f.eW)((function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var a=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[a[0],a[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this}),"unput"),more:(0,f.eW)((function(){return this._more=!0,this}),"more"),reject:(0,f.eW)((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:(0,f.eW)((function(t){this.unput(this.match.slice(t))}),"less"),pastInput:(0,f.eW)((function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:(0,f.eW)((function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:(0,f.eW)((function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"}),"showPosition"),test_match:(0,f.eW)((function(t,e){var r,n,a;if(this.options.backtrack_lexer&&(a={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(a.yylloc.range=this.yylloc.range.slice(0))),(n=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var i in a)this[i]=a[i];return!1}return!1}),"test_match"),next:(0,f.eW)((function(){if(this.done)return this.EOF;var t,e,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),i=0;i<a.length;i++)if((r=this._input.match(this.rules[a[i]]))&&(!e||r[0].length>e[0].length)){if(e=r,n=i,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,a[i])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,a[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:(0,f.eW)((function(){var t=this.next();return t||this.lex()}),"lex"),begin:(0,f.eW)((function(t){this.conditionStack.push(t)}),"begin"),popState:(0,f.eW)((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:(0,f.eW)((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:(0,f.eW)((function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"}),"topState"),pushState:(0,f.eW)((function(t){this.begin(t)}),"pushState"),stateStackSize:(0,f.eW)((function(){return this.conditionStack.length}),"stateStackSize"),options:{},performAction:(0,f.eW)((function(t,e,r,n){switch(r){case 0:return t.getLogger().debug("Found block-beta"),10;case 1:return t.getLogger().debug("Found id-block"),29;case 2:return t.getLogger().debug("Found block"),10;case 3:t.getLogger().debug(".",e.yytext);break;case 4:t.getLogger().debug("_",e.yytext);break;case 5:return 5;case 6:return e.yytext=-1,28;case 7:return e.yytext=e.yytext.replace(/columns\s+/,""),t.getLogger().debug("COLUMNS (LEX)",e.yytext),28;case 8:case 76:case 77:case 99:this.pushState("md_string");break;case 9:return"MD_STR";case 10:case 34:case 79:this.popState();break;case 11:this.pushState("string");break;case 12:t.getLogger().debug("LEX: POPPING STR:",e.yytext),this.popState();break;case 13:return t.getLogger().debug("LEX: STR end:",e.yytext),"STR";case 14:return e.yytext=e.yytext.replace(/space\:/,""),t.getLogger().debug("SPACE NUM (LEX)",e.yytext),21;case 15:return e.yytext="1",t.getLogger().debug("COLUMNS (LEX)",e.yytext),21;case 16:return 42;case 17:return"LINKSTYLE";case 18:return"INTERPOLATE";case 19:return this.pushState("CLASSDEF"),39;case 20:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 21:return this.popState(),this.pushState("CLASSDEFID"),40;case 22:return this.popState(),41;case 23:return this.pushState("CLASS"),43;case 24:return this.popState(),this.pushState("CLASS_STYLE"),44;case 25:return this.popState(),45;case 26:return this.pushState("STYLE_STMNT"),46;case 27:return this.popState(),this.pushState("STYLE_DEFINITION"),47;case 28:return this.popState(),48;case 29:return this.pushState("acc_title"),"acc_title";case 30:return this.popState(),"acc_title_value";case 31:return this.pushState("acc_descr"),"acc_descr";case 32:return this.popState(),"acc_descr_value";case 33:this.pushState("acc_descr_multiline");break;case 35:return"acc_descr_multiline_value";case 36:return 30;case 37:case 38:case 40:case 41:case 44:return this.popState(),t.getLogger().debug("Lex: (("),"NODE_DEND";case 39:return this.popState(),t.getLogger().debug("Lex: ))"),"NODE_DEND";case 42:return this.popState(),t.getLogger().debug("Lex: (-"),"NODE_DEND";case 43:return this.popState(),t.getLogger().debug("Lex: -)"),"NODE_DEND";case 45:return this.popState(),t.getLogger().debug("Lex: ]]"),"NODE_DEND";case 46:return this.popState(),t.getLogger().debug("Lex: ("),"NODE_DEND";case 47:return this.popState(),t.getLogger().debug("Lex: ])"),"NODE_DEND";case 48:case 49:return this.popState(),t.getLogger().debug("Lex: /]"),"NODE_DEND";case 50:return this.popState(),t.getLogger().debug("Lex: )]"),"NODE_DEND";case 51:return this.popState(),t.getLogger().debug("Lex: )"),"NODE_DEND";case 52:return this.popState(),t.getLogger().debug("Lex: ]>"),"NODE_DEND";case 53:return this.popState(),t.getLogger().debug("Lex: ]"),"NODE_DEND";case 54:return t.getLogger().debug("Lexa: -)"),this.pushState("NODE"),35;case 55:return t.getLogger().debug("Lexa: (-"),this.pushState("NODE"),35;case 56:return t.getLogger().debug("Lexa: ))"),this.pushState("NODE"),35;case 57:case 59:case 60:case 61:case 64:return t.getLogger().debug("Lexa: )"),this.pushState("NODE"),35;case 58:return t.getLogger().debug("Lex: ((("),this.pushState("NODE"),35;case 62:return t.getLogger().debug("Lexc: >"),this.pushState("NODE"),35;case 63:return t.getLogger().debug("Lexa: (["),this.pushState("NODE"),35;case 65:case 66:case 67:case 68:case 69:case 70:case 71:return this.pushState("NODE"),35;case 72:return t.getLogger().debug("Lexa: ["),this.pushState("NODE"),35;case 73:return this.pushState("BLOCK_ARROW"),t.getLogger().debug("LEX ARR START"),37;case 74:return t.getLogger().debug("Lex: NODE_ID",e.yytext),31;case 75:return t.getLogger().debug("Lex: EOF",e.yytext),8;case 78:return"NODE_DESCR";case 80:t.getLogger().debug("Lex: Starting string"),this.pushState("string");break;case 81:t.getLogger().debug("LEX ARR: Starting string"),this.pushState("string");break;case 82:return t.getLogger().debug("LEX: NODE_DESCR:",e.yytext),"NODE_DESCR";case 83:t.getLogger().debug("LEX POPPING"),this.popState();break;case 84:t.getLogger().debug("Lex: =>BAE"),this.pushState("ARROW_DIR");break;case 85:return e.yytext=e.yytext.replace(/^,\s*/,""),t.getLogger().debug("Lex (right): dir:",e.yytext),"DIR";case 86:return e.yytext=e.yytext.replace(/^,\s*/,""),t.getLogger().debug("Lex (left):",e.yytext),"DIR";case 87:return e.yytext=e.yytext.replace(/^,\s*/,""),t.getLogger().debug("Lex (x):",e.yytext),"DIR";case 88:return e.yytext=e.yytext.replace(/^,\s*/,""),t.getLogger().debug("Lex (y):",e.yytext),"DIR";case 89:return e.yytext=e.yytext.replace(/^,\s*/,""),t.getLogger().debug("Lex (up):",e.yytext),"DIR";case 90:return e.yytext=e.yytext.replace(/^,\s*/,""),t.getLogger().debug("Lex (down):",e.yytext),"DIR";case 91:return e.yytext="]>",t.getLogger().debug("Lex (ARROW_DIR end):",e.yytext),this.popState(),this.popState(),"BLOCK_ARROW_END";case 92:return t.getLogger().debug("Lex: LINK","#"+e.yytext+"#"),15;case 93:case 94:case 95:return t.getLogger().debug("Lex: LINK",e.yytext),15;case 96:case 97:case 98:return t.getLogger().debug("Lex: START_LINK",e.yytext),this.pushState("LLABEL"),16;case 100:return t.getLogger().debug("Lex: Starting string"),this.pushState("string"),"LINK_LABEL";case 101:return this.popState(),t.getLogger().debug("Lex: LINK","#"+e.yytext+"#"),15;case 102:case 103:return this.popState(),t.getLogger().debug("Lex: LINK",e.yytext),15;case 104:return t.getLogger().debug("Lex: COLON",e.yytext),e.yytext=e.yytext.slice(1),27}}),"anonymous"),rules:[/^(?:block-beta\b)/,/^(?:block:)/,/^(?:block\b)/,/^(?:[\s]+)/,/^(?:[\n]+)/,/^(?:((\u000D\u000A)|(\u000A)))/,/^(?:columns\s+auto\b)/,/^(?:columns\s+[\d]+)/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:space[:]\d+)/,/^(?:space\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\s+)/,/^(?:DEFAULT\s+)/,/^(?:\w+\s+)/,/^(?:[^\n]*)/,/^(?:class\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:style\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:end\b\s*)/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:[\)]\))/,/^(?:\}\})/,/^(?:\})/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\()/,/^(?:\]\])/,/^(?:\()/,/^(?:\]\))/,/^(?:\\\])/,/^(?:\/\])/,/^(?:\)\])/,/^(?:[\)])/,/^(?:\]>)/,/^(?:[\]])/,/^(?:-\))/,/^(?:\(-)/,/^(?:\)\))/,/^(?:\))/,/^(?:\(\(\()/,/^(?:\(\()/,/^(?:\{\{)/,/^(?:\{)/,/^(?:>)/,/^(?:\(\[)/,/^(?:\()/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\[\\)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:\[)/,/^(?:<\[)/,/^(?:[^\(\[\n\-\)\{\}\s\<\>:]+)/,/^(?:$)/,/^(?:["][`])/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:\]>\s*\()/,/^(?:,?\s*right\s*)/,/^(?:,?\s*left\s*)/,/^(?:,?\s*x\s*)/,/^(?:,?\s*y\s*)/,/^(?:,?\s*up\s*)/,/^(?:,?\s*down\s*)/,/^(?:\)\s*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*~~[\~]+\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:["][`])/,/^(?:["])/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?::\d+)/],conditions:{STYLE_DEFINITION:{rules:[28],inclusive:!1},STYLE_STMNT:{rules:[27],inclusive:!1},CLASSDEFID:{rules:[22],inclusive:!1},CLASSDEF:{rules:[20,21],inclusive:!1},CLASS_STYLE:{rules:[25],inclusive:!1},CLASS:{rules:[24],inclusive:!1},LLABEL:{rules:[99,100,101,102,103],inclusive:!1},ARROW_DIR:{rules:[85,86,87,88,89,90,91],inclusive:!1},BLOCK_ARROW:{rules:[76,81,84],inclusive:!1},NODE:{rules:[37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,77,80],inclusive:!1},md_string:{rules:[9,10,78,79],inclusive:!1},space:{rules:[],inclusive:!1},string:{rules:[12,13,82,83],inclusive:!1},acc_descr_multiline:{rules:[34,35],inclusive:!1},acc_descr:{rules:[32],inclusive:!1},acc_title:{rules:[30],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,11,14,15,16,17,18,19,23,26,29,31,33,36,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,92,93,94,95,96,97,98,104],inclusive:!0}}}}();function m(){this.yy={}}return b.lexer=v,(0,f.eW)(m,"Parser"),m.prototype=b,b.Parser=m,new m}();k.parser=k;var _=k,L=new Map,S=[],E=new Map,Z="color",W="fill",C=(0,y.nV)(),D=new Map,N=(0,f.eW)((function(t){return y.SY.sanitizeText(t,C)}),"sanitizeText"),M=(0,f.eW)((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=D.get(t);r||(r={id:t,styles:[],textStyles:[]},D.set(t,r)),void 0!==e&&null!==e&&e.split(",").forEach((function(t){var e=t.replace(/([^;]*);/,"$1").trim();if(RegExp(Z).exec(t)){var n=e.replace(W,"bgFill").replace(Z,W);r.textStyles.push(n)}r.styles.push(e)}))}),"addStyleClass"),T=(0,f.eW)((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=L.get(t);void 0!==e&&null!==e&&(r.styles=e.split(","))}),"addStyle2Node"),I=(0,f.eW)((function(t,e){t.split(",").forEach((function(t){var r=L.get(t);if(void 0===r){var n=t.trim();r={id:n,type:"na",children:[]},L.set(n,r)}r.classes||(r.classes=[]),r.classes.push(e)}))}),"setCssClass"),O=(0,f.eW)((function(t,e){var r,n,a=t.flat(),i=[],s=a.find((function(t){return"column-setting"===(null===t||void 0===t?void 0:t.type)})),o=null!==(r=null===s||void 0===s?void 0:s.columns)&&void 0!==r?r:-1,l=(0,c.Z)(a);try{for(l.s();!(n=l.n()).done;){var d,u,h=n.value;if("number"===typeof o&&o>0&&"column-setting"!==h.type&&"number"===typeof h.widthInColumns&&h.widthInColumns>o&&f.cM.warn("Block ".concat(h.id," width ").concat(h.widthInColumns," exceeds configured column width ").concat(o)),h.label&&(h.label=N(h.label)),"classDef"!==h.type)if("applyClass"!==h.type)if("applyStyles"!==h.type)if("column-setting"===h.type)e.columns=null!==(d=h.columns)&&void 0!==d?d:-1;else if("edge"===h.type){var p,g=(null!==(p=E.get(h.id))&&void 0!==p?p:0)+1;E.set(h.id,g),h.id=g+"-"+h.id,S.push(h)}else{h.label||("composite"===h.type?h.label="":h.label=h.id);var y=L.get(h.id);if(void 0===y?L.set(h.id,h):("na"!==h.type&&(y.type=h.type),h.label!==h.id&&(y.label=h.label)),h.children&&O(h.children,h),"space"===h.type)for(var b,v=null!==(b=h.width)&&void 0!==b?b:1,m=0;m<v;m++){var w=(0,x.Z)(h);w.id=w.id+"-"+m,L.set(w.id,w),i.push(w)}else void 0===y&&i.push(h)}else null!==h&&void 0!==h&&h.stylesStr&&T(h.id,null===h||void 0===h?void 0:h.stylesStr);else I(h.id,null!==(u=null===h||void 0===h?void 0:h.styleClass)&&void 0!==u?u:"");else M(h.id,h.css)}}catch(k){l.e(k)}finally{l.f()}e.children=i}),"populateBlockDatabase"),B=[],z={id:"root",type:"composite",children:[],columns:-1},R=(0,f.eW)((function(){f.cM.debug("Clear called"),(0,y.ZH)(),z={id:"root",type:"composite",children:[],columns:-1},L=new Map([["root",z]]),B=[],D=new Map,S=[],E=new Map}),"clear");function A(t){switch(f.cM.debug("typeStr2Type",t),t){case"[]":return"square";case"()":return f.cM.debug("we have a round"),"round";case"(())":return"circle";case">]":return"rect_left_inv_arrow";case"{}":return"diamond";case"{{}}":return"hexagon";case"([])":return"stadium";case"[[]]":return"subroutine";case"[()]":return"cylinder";case"((()))":return"doublecircle";case"[//]":return"lean_right";case"[\\\\]":return"lean_left";case"[/\\]":return"trapezoid";case"[\\/]":return"inv_trapezoid";case"<[]>":return"block_arrow";default:return"na"}}function P(t){return f.cM.debug("typeStr2Type",t),"=="===t?"thick":"normal"}function Y(t){switch(t.replace(/^[\s-]+|[\s-]+$/g,"")){case"x":return"arrow_cross";case"o":return"arrow_circle";case">":return"arrow_point";default:return""}}(0,f.eW)(A,"typeStr2Type"),(0,f.eW)(P,"edgeTypeStr2Type"),(0,f.eW)(Y,"edgeStrToEdgeData");var F=0,X=(0,f.eW)((function(){return F++,"id-"+Math.random().toString(36).substr(2,12)+"-"+F}),"generateId"),j=(0,f.eW)((function(t){z.children=t,O(t,z),B=z.children}),"setHierarchy"),H=(0,f.eW)((function(t){var e=L.get(t);return e?e.columns?e.columns:e.children?e.children.length:-1:-1}),"getColumns"),$=(0,f.eW)((function(){return(0,o.Z)(L.values())}),"getBlocksFlat"),U=(0,f.eW)((function(){return B||[]}),"getBlocks"),K=(0,f.eW)((function(){return S}),"getEdges"),V=(0,f.eW)((function(t){return L.get(t)}),"getBlock"),q=(0,f.eW)((function(t){L.set(t.id,t)}),"setBlock"),G=(0,f.eW)((function(){return f.cM}),"getLogger"),J=(0,f.eW)((function(){return D}),"getClasses"),Q={getConfig:(0,f.eW)((function(){return(0,y.iE)().block}),"getConfig"),typeStr2Type:A,edgeTypeStr2Type:P,edgeStrToEdgeData:Y,getLogger:G,getBlocksFlat:$,getBlocks:U,getEdges:K,setHierarchy:j,getBlock:V,setBlock:q,getColumns:H,getClasses:J,clear:R,generateId:X},tt=(0,f.eW)((function(t,e){var r=b.Z,n=r(t,"r"),a=r(t,"g"),i=r(t,"b");return v.Z(n,a,i,e)}),"fade"),et=(0,f.eW)((function(t){return".label {\n    font-family: ".concat(t.fontFamily,";\n    color: ").concat(t.nodeTextColor||t.textColor,";\n  }\n  .cluster-label text {\n    fill: ").concat(t.titleColor,";\n  }\n  .cluster-label span,p {\n    color: ").concat(t.titleColor,";\n  }\n\n\n\n  .label text,span,p {\n    fill: ").concat(t.nodeTextColor||t.textColor,";\n    color: ").concat(t.nodeTextColor||t.textColor,";\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ").concat(t.mainBkg,";\n    stroke: ").concat(t.nodeBorder,";\n    stroke-width: 1px;\n  }\n  .flowchart-label text {\n    text-anchor: middle;\n  }\n  // .flowchart-label .text-outer-tspan {\n  //   text-anchor: middle;\n  // }\n  // .flowchart-label .text-inner-tspan {\n  //   text-anchor: start;\n  // }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ").concat(t.arrowheadColor,";\n  }\n\n  .edgePath .path {\n    stroke: ").concat(t.lineColor,";\n    stroke-width: 2.0px;\n  }\n\n  .flowchart-link {\n    stroke: ").concat(t.lineColor,";\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ").concat(t.edgeLabelBackground,";\n    rect {\n      opacity: 0.5;\n      background-color: ").concat(t.edgeLabelBackground,";\n      fill: ").concat(t.edgeLabelBackground,";\n    }\n    text-align: center;\n  }\n\n  /* For html labels only */\n  .labelBkg {\n    background-color: ").concat(tt(t.edgeLabelBackground,.5),";\n    // background-color:\n  }\n\n  .node .cluster {\n    // fill: ").concat(tt(t.mainBkg,.5),";\n    fill: ").concat(tt(t.clusterBkg,.5),";\n    stroke: ").concat(tt(t.clusterBorder,.2),";\n    box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;\n    stroke-width: 1px;\n  }\n\n  .cluster text {\n    fill: ").concat(t.titleColor,";\n  }\n\n  .cluster span,p {\n    color: ").concat(t.titleColor,";\n  }\n  /* .cluster div {\n    color: ").concat(t.titleColor,";\n  } */\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ").concat(t.fontFamily,";\n    font-size: 12px;\n    background: ").concat(t.tertiaryColor,";\n    border: 1px solid ").concat(t.border2,";\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .flowchartTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ").concat(t.textColor,";\n  }\n  ").concat((0,d.G)(),"\n")}),"getStyles"),rt=(0,f.eW)((function(t,e,r,n){e.forEach((function(e){nt[e](t,r,n)}))}),"insertMarkers"),nt={extension:(0,f.eW)((function(t,e,r){f.cM.trace("Making markers for ",r),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")}),"extension"),composition:(0,f.eW)((function(t,e,r){t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")}),"composition"),aggregation:(0,f.eW)((function(t,e,r){t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")}),"aggregation"),dependency:(0,f.eW)((function(t,e,r){t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")}),"dependency"),lollipop:(0,f.eW)((function(t,e,r){t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)}),"lollipop"),point:(0,f.eW)((function(t,e,r){t.append("marker").attr("id",r+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")}),"point"),circle:(0,f.eW)((function(t,e,r){t.append("marker").attr("id",r+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")}),"circle"),cross:(0,f.eW)((function(t,e,r){t.append("marker").attr("id",r+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")}),"cross"),barb:(0,f.eW)((function(t,e,r){t.append("defs").append("marker").attr("id",r+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}),"barb")},at=rt,it=null!==(n=null===(a=(0,y.nV)())||void 0===a||null===(a=a.block)||void 0===a?void 0:a.padding)&&void 0!==n?n:8;function st(t,e){if(0===t||!Number.isInteger(t))throw new Error("Columns must be an integer !== 0.");if(e<0||!Number.isInteger(e))throw new Error("Position must be a non-negative integer."+e);return t<0?{px:e,py:0}:1===t?{px:0,py:e}:{px:e%t,py:Math.floor(e/t)}}(0,f.eW)(st,"calculateBlockPosition");var ot=(0,f.eW)((function(t){var e,r=0,n=0,a=(0,c.Z)(t.children);try{for(a.s();!(e=a.n()).done;){var i,s=e.value,o=null!==(i=s.size)&&void 0!==i?i:{width:0,height:0,x:0,y:0},l=o.width,d=o.height,u=o.x,h=o.y;if(f.cM.debug("getMaxChildSize abc95 child:",s.id,"width:",l,"height:",d,"x:",u,"y:",h,s.type),"space"!==s.type){var p;if(l>r)r=l/(null!==(p=t.widthInColumns)&&void 0!==p?p:1);d>n&&(n=d)}}}catch(g){a.e(g)}finally{a.f()}return{width:r,height:n}}),"getMaxChildSize");function ct(t,e){var r,n,a,i,s,o,l,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;f.cM.debug("setBlockSizes abc95 (start)",t.id,null===t||void 0===t||null===(r=t.size)||void 0===r?void 0:r.x,"block width =",null===t||void 0===t?void 0:t.size,"siblingWidth",d),null!==t&&void 0!==t&&null!==(n=t.size)&&void 0!==n&&n.width||(t.size={width:d,height:u,x:0,y:0});var h=0,p=0;if((null===(a=t.children)||void 0===a?void 0:a.length)>0){var g,y,x,b,v=(0,c.Z)(t.children);try{for(v.s();!(b=v.n()).done;){ct(b.value,e)}}catch(V){v.e(V)}finally{v.f()}var m=ot(t);h=m.width,p=m.height,f.cM.debug("setBlockSizes abc95 maxWidth of",t.id,":s children is ",h,p);var w,k=(0,c.Z)(t.children);try{for(k.s();!(w=k.n()).done;){var _,L,S=w.value;if(S.size)f.cM.debug("abc95 Setting size of children of ".concat(t.id," id=").concat(S.id," ").concat(h," ").concat(p," ").concat(JSON.stringify(S.size))),S.size.width=h*(null!==(_=S.widthInColumns)&&void 0!==_?_:1)+it*((null!==(L=S.widthInColumns)&&void 0!==L?L:1)-1),S.size.height=p,S.size.x=0,S.size.y=0,f.cM.debug("abc95 updating size of ".concat(t.id," children child:").concat(S.id," maxWidth:").concat(h," maxHeight:").concat(p))}}catch(V){k.e(V)}finally{k.f()}var E,Z=(0,c.Z)(t.children);try{for(Z.s();!(E=Z.n()).done;){ct(E.value,e,h,p)}}catch(V){Z.e(V)}finally{Z.f()}var W,C=null!==(g=t.columns)&&void 0!==g?g:-1,D=0,N=(0,c.Z)(t.children);try{for(N.s();!(W=N.n()).done;){var M;D+=null!==(M=W.value.widthInColumns)&&void 0!==M?M:1}}catch(V){N.e(V)}finally{N.f()}var T=t.children.length;C>0&&C<D&&(T=C);var I=Math.ceil(D/T),O=T*(h+it)+it,B=I*(p+it)+it;if(O<d){f.cM.debug("Detected to small sibling: abc95 ".concat(t.id," siblingWidth ").concat(d," siblingHeight ").concat(u," width ").concat(O)),O=d,B=u;var z=(d-T*it-it)/T,R=(u-I*it-it)/I;f.cM.debug("Size indata abc88",t.id,"childWidth",z,"maxWidth",h),f.cM.debug("Size indata abc88",t.id,"childHeight",R,"maxHeight",p),f.cM.debug("Size indata abc88 xSize",T,"padding",it);var A,P=(0,c.Z)(t.children);try{for(P.s();!(A=P.n()).done;){var Y=A.value;Y.size&&(Y.size.width=z,Y.size.height=R,Y.size.x=0,Y.size.y=0)}}catch(V){P.e(V)}finally{P.f()}}if(f.cM.debug("abc95 (finale calc) ".concat(t.id," xSize ").concat(T," ySize ").concat(I," columns ").concat(C).concat(t.children.length," width=").concat(Math.max(O,(null===(y=t.size)||void 0===y?void 0:y.width)||0))),O<((null===t||void 0===t||null===(x=t.size)||void 0===x?void 0:x.width)||0)){var F;O=(null===t||void 0===t||null===(F=t.size)||void 0===F?void 0:F.width)||0;var X=C>0?Math.min(t.children.length,C):t.children.length;if(X>0){var j,H=(O-X*it-it)/X;f.cM.debug("abc95 (growing to fit) width",t.id,O,null===(j=t.size)||void 0===j?void 0:j.width,H);var $,U=(0,c.Z)(t.children);try{for(U.s();!($=U.n()).done;){var K=$.value;K.size&&(K.size.width=H)}}catch(V){U.e(V)}finally{U.f()}}}t.size={width:O,height:B,x:0,y:0}}f.cM.debug("setBlockSizes abc94 (done)",t.id,null===t||void 0===t||null===(i=t.size)||void 0===i?void 0:i.x,null===t||void 0===t||null===(s=t.size)||void 0===s?void 0:s.width,null===t||void 0===t||null===(o=t.size)||void 0===o?void 0:o.y,null===t||void 0===t||null===(l=t.size)||void 0===l?void 0:l.height)}function lt(t,e){var r,n,a,i,s,o,l;f.cM.debug("abc85 layout blocks (=>layoutBlocks) ".concat(t.id," x: ").concat(null===t||void 0===t||null===(r=t.size)||void 0===r?void 0:r.x," y: ").concat(null===t||void 0===t||null===(n=t.size)||void 0===n?void 0:n.y," width: ").concat(null===t||void 0===t||null===(a=t.size)||void 0===a?void 0:a.width));var d=null!==(i=t.columns)&&void 0!==i?i:-1;if(f.cM.debug("layoutBlocks columns abc95",t.id,"=>",d,t),t.children&&t.children.length>0){var u,h,p,g,y,x,b=null!==(u=null===t||void 0===t||null===(h=t.children[0])||void 0===h||null===(h=h.size)||void 0===h?void 0:h.width)&&void 0!==u?u:0,v=t.children.length*b+(t.children.length-1)*it;f.cM.debug("widthOfChildren 88",v,"posX");var m=0;f.cM.debug("abc91 block?.size?.x",t.id,null===t||void 0===t||null===(p=t.size)||void 0===p?void 0:p.x);var w,k=null!==t&&void 0!==t&&null!==(g=t.size)&&void 0!==g&&g.x?(null===t||void 0===t||null===(y=t.size)||void 0===y?void 0:y.x)+(-(null===t||void 0===t||null===(x=t.size)||void 0===x?void 0:x.width)/2||0):-it,_=0,L=(0,c.Z)(t.children);try{for(L.s();!(w=L.n()).done;){var S,E,Z,W=w.value,C=t;if(W.size){var D,N,M,T=W.size,I=T.width,O=T.height,B=st(d,m),z=B.px,R=B.py;if(R!=_)_=R,k=null!==t&&void 0!==t&&null!==(D=t.size)&&void 0!==D&&D.x?(null===t||void 0===t||null===(N=t.size)||void 0===N?void 0:N.x)+(-(null===t||void 0===t||null===(M=t.size)||void 0===M?void 0:M.width)/2||0):-it,f.cM.debug("New row in layout for block",t.id," and child ",W.id,_);if(f.cM.debug("abc89 layout blocks (child) id: ".concat(W.id," Pos: ").concat(m," (px, py) ").concat(z,",").concat(R," (").concat(null===C||void 0===C||null===(S=C.size)||void 0===S?void 0:S.x,",").concat(null===C||void 0===C||null===(E=C.size)||void 0===E?void 0:E.y,") parent: ").concat(C.id," width: ").concat(I).concat(it)),C.size){var A,P,Y=I/2;W.size.x=k+it+Y,f.cM.debug("abc91 layout blocks (calc) px, pyid:".concat(W.id," startingPos=X").concat(k," new startingPosX").concat(W.size.x," ").concat(Y," padding=").concat(it," width=").concat(I," halfWidth=").concat(Y," => x:").concat(W.size.x," y:").concat(W.size.y," ").concat(W.widthInColumns," (width * (child?.w || 1)) / 2 ").concat(I*(null!==(A=null===W||void 0===W?void 0:W.widthInColumns)&&void 0!==A?A:1)/2)),k=W.size.x+Y,W.size.y=C.size.y-C.size.height/2+R*(O+it)+O/2+it,f.cM.debug("abc88 layout blocks (calc) px, pyid:".concat(W.id,"startingPosX").concat(k).concat(it).concat(Y,"=>x:").concat(W.size.x,"y:").concat(W.size.y).concat(W.widthInColumns,"(width * (child?.w || 1)) / 2").concat(I*(null!==(P=null===W||void 0===W?void 0:W.widthInColumns)&&void 0!==P?P:1)/2))}W.children&&lt(W,e);var F=null!==(Z=null===W||void 0===W?void 0:W.widthInColumns)&&void 0!==Z?Z:1;d>0&&(F=Math.min(F,d-m%d)),m+=F,f.cM.debug("abc88 columnsPos",W,m)}}}catch(X){L.e(X)}finally{L.f()}}f.cM.debug("layout blocks (<==layoutBlocks) ".concat(t.id," x: ").concat(null===t||void 0===t||null===(s=t.size)||void 0===s?void 0:s.x," y: ").concat(null===t||void 0===t||null===(o=t.size)||void 0===o?void 0:o.y," width: ").concat(null===t||void 0===t||null===(l=t.size)||void 0===l?void 0:l.width))}function dt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{minX:0,minY:0,maxX:0,maxY:0},r=e.minX,n=e.minY,a=e.maxX,i=e.maxY;if(t.size&&"root"!==t.id){var s=t.size,o=s.x,l=s.y,d=s.width,u=s.height;o-d/2<r&&(r=o-d/2),l-u/2<n&&(n=l-u/2),o+d/2>a&&(a=o+d/2),l+u/2>i&&(i=l+u/2)}if(t.children){var h,p=(0,c.Z)(t.children);try{for(p.s();!(h=p.n()).done;){var g=dt(h.value,{minX:r,minY:n,maxX:a,maxY:i});r=g.minX,n=g.minY,a=g.maxX,i=g.maxY}}catch(y){p.e(y)}finally{p.f()}}return{minX:r,minY:n,maxX:a,maxY:i}}function ut(t){var e=t.getBlock("root");if(e){ct(e,t,0,0),lt(e,t),f.cM.debug("getBlocks",JSON.stringify(e,null,2));var r=dt(e),n=r.minX,a=r.minY;return{x:n,y:a,width:r.maxX-n,height:r.maxY-a}}}function ht(t,e){e&&t.attr("style",e)}function pt(t,e){var r=(0,m.Ys)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),n=r.append("xhtml:div"),a=t.label,i=t.isNode?"nodeLabel":"edgeLabel",s=n.append("span");return s.html((0,y.oO)(a,e)),ht(s,t.labelStyle),s.attr("class",i),ht(n,t.labelStyle),n.style("display","inline-block"),n.style("white-space","nowrap"),n.attr("xmlns","http://www.w3.org/1999/xhtml"),r.node()}(0,f.eW)(ct,"setBlockSizes"),(0,f.eW)(lt,"layoutBlocks"),(0,f.eW)(dt,"findBounds"),(0,f.eW)(ut,"layout"),(0,f.eW)(ht,"applyStyle"),(0,f.eW)(pt,"addHtmlLabel");var gt=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r,n,a){var s,o,l,d,u,h,x,b,v,m,w;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("object"===typeof(s=e||"")&&(s=s[0]),o=(0,y.nV)(),!(0,y.ku)(o.flowchart.htmlLabels)){t.next=14;break}return s=s.replace(/\\n|\n/g,"<br />"),f.cM.debug("vertexText"+s),t.next=8,(0,p.EY)((0,g.SH)(s));case 8:return l=t.sent,d={isNode:a,label:l,labelStyle:r.replace("fill:","color:")},u=pt(d,o),t.abrupt("return",u);case 14:(h=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("style",r.replace("color:","fill:")),x=[],x="string"===typeof s?s.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(s)?s:[],b=(0,c.Z)(x);try{for(b.s();!(v=b.n()).done;)m=v.value,(w=document.createElementNS("http://www.w3.org/2000/svg","tspan")).setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),w.setAttribute("dy","1em"),w.setAttribute("x","0"),n?w.setAttribute("class","title-row"):w.setAttribute("class","row"),w.textContent=m.trim(),h.appendChild(w)}catch(i){b.e(i)}finally{b.f()}return t.abrupt("return",h);case 21:case"end":return t.stop()}}),t)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),"createLabel"),yt=gt,ft=(0,f.eW)((function(t,e,r,n,a){e.arrowTypeStart&&bt(t,"start",e.arrowTypeStart,r,n,a),e.arrowTypeEnd&&bt(t,"end",e.arrowTypeEnd,r,n,a)}),"addEdgeMarkers"),xt={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},bt=(0,f.eW)((function(t,e,r,n,a,i){var s=xt[r];if(s){var o="start"===e?"Start":"End";t.attr("marker-".concat(e),"url(".concat(n,"#").concat(a,"_").concat(i,"-").concat(s).concat(o,")"))}else f.cM.warn("Unknown arrow type: ".concat(r))}),"addEdgeMarker"),vt={},mt={},wt=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r){var n,a,s,o,c,l,d,u,h,g,f,x,b,v,w,k,_,L,S,E,Z,W,C,D,N;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(0,y.nV)(),a=(0,y.ku)(n.flowchart.htmlLabels),"markdown"!==r.labelType){t.next=6;break}t.t0=(0,p.rw)(e,r.label,{style:r.labelStyle,useHtmlLabels:a,addSvgBackground:!0},n),t.next=9;break;case 6:return t.next=8,yt(r.label,r.labelStyle);case 8:t.t0=t.sent;case 9:if(s=t.t0,o=e.insert("g").attr("class","edgeLabel"),(c=o.insert("g").attr("class","label")).node().appendChild(s),l=s.getBBox(),a&&(d=s.children[0],u=(0,m.Ys)(s),l=d.getBoundingClientRect(),u.attr("width",l.width),u.attr("height",l.height)),c.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),vt[r.id]=o,r.width=l.width,r.height=l.height,!r.startLabelLeft){t.next=31;break}return t.next=22,yt(r.startLabelLeft,r.labelStyle);case 22:g=t.sent,f=e.insert("g").attr("class","edgeTerminals"),x=f.insert("g").attr("class","inner"),h=x.node().appendChild(g),b=g.getBBox(),x.attr("transform","translate("+-b.width/2+", "+-b.height/2+")"),mt[r.id]||(mt[r.id]={}),mt[r.id].startLeft=f,kt(h,r.startLabelLeft);case 31:if(!r.startLabelRight){t.next=44;break}return t.next=34,yt(r.startLabelRight,r.labelStyle);case 34:v=t.sent,w=e.insert("g").attr("class","edgeTerminals"),k=w.insert("g").attr("class","inner"),h=w.node().appendChild(v),k.node().appendChild(v),_=v.getBBox(),k.attr("transform","translate("+-_.width/2+", "+-_.height/2+")"),mt[r.id]||(mt[r.id]={}),mt[r.id].startRight=w,kt(h,r.startLabelRight);case 44:if(!r.endLabelLeft){t.next=57;break}return t.next=47,yt(r.endLabelLeft,r.labelStyle);case 47:L=t.sent,S=e.insert("g").attr("class","edgeTerminals"),E=S.insert("g").attr("class","inner"),h=E.node().appendChild(L),Z=L.getBBox(),E.attr("transform","translate("+-Z.width/2+", "+-Z.height/2+")"),S.node().appendChild(L),mt[r.id]||(mt[r.id]={}),mt[r.id].endLeft=S,kt(h,r.endLabelLeft);case 57:if(!r.endLabelRight){t.next=70;break}return t.next=60,yt(r.endLabelRight,r.labelStyle);case 60:W=t.sent,C=e.insert("g").attr("class","edgeTerminals"),D=C.insert("g").attr("class","inner"),h=D.node().appendChild(W),N=W.getBBox(),D.attr("transform","translate("+-N.width/2+", "+-N.height/2+")"),C.node().appendChild(W),mt[r.id]||(mt[r.id]={}),mt[r.id].endRight=C,kt(h,r.endLabelRight);case 70:return t.abrupt("return",s);case 71:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),"insertEdgeLabel");function kt(t,e){(0,y.nV)().flowchart.htmlLabels&&t&&(t.style.width=9*e.length+"px",t.style.height="12px")}(0,f.eW)(kt,"setTerminalWidth");var _t=(0,f.eW)((function(t,e){f.cM.debug("Moving label abc88 ",t.id,t.label,vt[t.id],e);var r=e.updatedPath?e.updatedPath:e.originalPath,n=(0,y.nV)(),a=(0,h.L)(n).subGraphTitleTotalMargin;if(t.label){var i=vt[t.id],s=t.x,o=t.y;if(r){var c=g.w8.calcLabelPosition(r);f.cM.debug("Moving label "+t.label+" from (",s,",",o,") to (",c.x,",",c.y,") abc88"),e.updatedPath&&(s=c.x,o=c.y)}i.attr("transform","translate(".concat(s,", ").concat(o+a/2,")"))}if(t.startLabelLeft){var l=mt[t.id].startLeft,d=t.x,u=t.y;if(r){var p=g.w8.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",r);d=p.x,u=p.y}l.attr("transform","translate(".concat(d,", ").concat(u,")"))}if(t.startLabelRight){var x=mt[t.id].startRight,b=t.x,v=t.y;if(r){var m=g.w8.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",r);b=m.x,v=m.y}x.attr("transform","translate(".concat(b,", ").concat(v,")"))}if(t.endLabelLeft){var w=mt[t.id].endLeft,k=t.x,_=t.y;if(r){var L=g.w8.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",r);k=L.x,_=L.y}w.attr("transform","translate(".concat(k,", ").concat(_,")"))}if(t.endLabelRight){var S=mt[t.id].endRight,E=t.x,Z=t.y;if(r){var W=g.w8.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",r);E=W.x,Z=W.y}S.attr("transform","translate(".concat(E,", ").concat(Z,")"))}}),"positionEdgeLabel"),Lt=(0,f.eW)((function(t,e){var r=t.x,n=t.y,a=Math.abs(e.x-r),i=Math.abs(e.y-n),s=t.width/2,o=t.height/2;return a>=s||i>=o}),"outsideNode"),St=(0,f.eW)((function(t,e,r){f.cM.debug("intersection calc abc89:\n  outsidePoint: ".concat(JSON.stringify(e),"\n  insidePoint : ").concat(JSON.stringify(r),"\n  node        : x:").concat(t.x," y:").concat(t.y," w:").concat(t.width," h:").concat(t.height));var n=t.x,a=t.y,i=Math.abs(n-r.x),s=t.width/2,o=r.x<e.x?s-i:s+i,c=t.height/2,l=Math.abs(e.y-r.y),d=Math.abs(e.x-r.x);if(Math.abs(a-e.y)*s>Math.abs(n-e.x)*c){var u=r.y<e.y?e.y-c-a:a-c-e.y;o=d*u/l;var h={x:r.x<e.x?r.x+o:r.x-d+o,y:r.y<e.y?r.y+l-u:r.y-l+u};return 0===o&&(h.x=e.x,h.y=e.y),0===d&&(h.x=e.x),0===l&&(h.y=e.y),f.cM.debug("abc89 topp/bott calc, Q ".concat(l,", q ").concat(u,", R ").concat(d,", r ").concat(o),h),h}var p=l*(o=r.x<e.x?e.x-s-n:n-s-e.x)/d,g=r.x<e.x?r.x+d-o:r.x-d+o,y=r.y<e.y?r.y+p:r.y-p;return f.cM.debug("sides calc abc89, Q ".concat(l,", q ").concat(p,", R ").concat(d,", r ").concat(o),{_x:g,_y:y}),0===o&&(g=e.x,y=e.y),0===d&&(g=e.x),0===l&&(y=e.y),{x:g,y:y}}),"intersection"),Et=(0,f.eW)((function(t,e){f.cM.debug("abc88 cutPathAtIntersect",t,e);var r=[],n=t[0],a=!1;return t.forEach((function(t){if(Lt(e,t)||a)n=t,a||r.push(t);else{var i=St(e,n,t),s=!1;r.forEach((function(t){s=s||t.x===i.x&&t.y===i.y})),r.some((function(t){return t.x===i.x&&t.y===i.y}))||r.push(i),a=!0}})),r}),"cutPathAtIntersect"),Zt=(0,f.eW)((function(t,e,r,n,a,i,s){var o=r.points;f.cM.debug("abc88 InsertEdge: edge=",r,"e=",e);var c=!1,l=i.node(e.v),d=i.node(e.w);null!==d&&void 0!==d&&d.intersect&&null!==l&&void 0!==l&&l.intersect&&((o=o.slice(1,r.points.length-1)).unshift(l.intersect(o[0])),o.push(d.intersect(o[o.length-1]))),r.toCluster&&(f.cM.debug("to cluster abc88",n[r.toCluster]),o=Et(r.points,n[r.toCluster].node),c=!0),r.fromCluster&&(f.cM.debug("from cluster abc88",n[r.fromCluster]),o=Et(o.reverse(),n[r.fromCluster].node).reverse(),c=!0);var h=o.filter((function(t){return!Number.isNaN(t.y)})),p=m.$0Z;!r.curve||"graph"!==a&&"flowchart"!==a||(p=r.curve);var g,x=(0,u.om)(r),b=x.x,v=x.y,w=(0,m.jvg)().x(b).y(v).curve(p);switch(r.thickness){case"normal":g="edge-thickness-normal";break;case"thick":case"invisible":g="edge-thickness-thick";break;default:g=""}switch(r.pattern){case"solid":g+=" edge-pattern-solid";break;case"dotted":g+=" edge-pattern-dotted";break;case"dashed":g+=" edge-pattern-dashed"}var k=t.append("path").attr("d",w(h)).attr("id",r.id).attr("class"," "+g+(r.classes?" "+r.classes:"")).attr("style",r.style),_="";((0,y.nV)().flowchart.arrowMarkerAbsolute||(0,y.nV)().state.arrowMarkerAbsolute)&&(_=(0,y.Gr)(!0)),ft(k,r,_,s,a);var L={};return c&&(L.updatedPath=o),L.originalPath=r.points,L}),"insertEdge"),Wt=(0,f.eW)((function(t){var e,r=new Set,n=(0,c.Z)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;switch(a){case"x":r.add("right"),r.add("left");break;case"y":r.add("up"),r.add("down");break;default:r.add(a)}}}catch(i){n.e(i)}finally{n.f()}return r}),"expandAndDeduplicateDirections"),Ct=(0,f.eW)((function(t,e,r){var n=Wt(t),a=e.height+2*r.padding,i=a/2,s=e.width+2*i+r.padding,o=r.padding/2;return n.has("right")&&n.has("left")&&n.has("up")&&n.has("down")?[{x:0,y:0},{x:i,y:0},{x:s/2,y:2*o},{x:s-i,y:0},{x:s,y:0},{x:s,y:-a/3},{x:s+2*o,y:-a/2},{x:s,y:-2*a/3},{x:s,y:-a},{x:s-i,y:-a},{x:s/2,y:-a-2*o},{x:i,y:-a},{x:0,y:-a},{x:0,y:-2*a/3},{x:-2*o,y:-a/2},{x:0,y:-a/3}]:n.has("right")&&n.has("left")&&n.has("up")?[{x:i,y:0},{x:s-i,y:0},{x:s,y:-a/2},{x:s-i,y:-a},{x:i,y:-a},{x:0,y:-a/2}]:n.has("right")&&n.has("left")&&n.has("down")?[{x:0,y:0},{x:i,y:-a},{x:s-i,y:-a},{x:s,y:0}]:n.has("right")&&n.has("up")&&n.has("down")?[{x:0,y:0},{x:s,y:-i},{x:s,y:-a+i},{x:0,y:-a}]:n.has("left")&&n.has("up")&&n.has("down")?[{x:s,y:0},{x:0,y:-i},{x:0,y:-a+i},{x:s,y:-a}]:n.has("right")&&n.has("left")?[{x:i,y:0},{x:i,y:-o},{x:s-i,y:-o},{x:s-i,y:0},{x:s,y:-a/2},{x:s-i,y:-a},{x:s-i,y:-a+o},{x:i,y:-a+o},{x:i,y:-a},{x:0,y:-a/2}]:n.has("up")&&n.has("down")?[{x:s/2,y:0},{x:0,y:-o},{x:i,y:-o},{x:i,y:-a+o},{x:0,y:-a+o},{x:s/2,y:-a},{x:s,y:-a+o},{x:s-i,y:-a+o},{x:s-i,y:-o},{x:s,y:-o}]:n.has("right")&&n.has("up")?[{x:0,y:0},{x:s,y:-i},{x:0,y:-a}]:n.has("right")&&n.has("down")?[{x:0,y:0},{x:s,y:0},{x:0,y:-a}]:n.has("left")&&n.has("up")?[{x:s,y:0},{x:0,y:-i},{x:s,y:-a}]:n.has("left")&&n.has("down")?[{x:s,y:0},{x:0,y:0},{x:s,y:-a}]:n.has("right")?[{x:i,y:-o},{x:i,y:-o},{x:s-i,y:-o},{x:s-i,y:0},{x:s,y:-a/2},{x:s-i,y:-a},{x:s-i,y:-a+o},{x:i,y:-a+o},{x:i,y:-a+o}]:n.has("left")?[{x:i,y:0},{x:i,y:-o},{x:s-i,y:-o},{x:s-i,y:-a+o},{x:i,y:-a+o},{x:i,y:-a},{x:0,y:-a/2}]:n.has("up")?[{x:i,y:-o},{x:i,y:-a+o},{x:0,y:-a+o},{x:s/2,y:-a},{x:s,y:-a+o},{x:s-i,y:-a+o},{x:s-i,y:-o}]:n.has("down")?[{x:s/2,y:0},{x:0,y:-o},{x:i,y:-o},{x:i,y:-a+o},{x:s-i,y:-a+o},{x:s-i,y:-o},{x:s,y:-o}]:[{x:0,y:0}]}),"getArrowPoints");function Dt(t,e){return t.intersect(e)}(0,f.eW)(Dt,"intersectNode");var Nt=Dt;function Mt(t,e,r,n){var a=t.x,i=t.y,s=a-n.x,o=i-n.y,c=Math.sqrt(e*e*o*o+r*r*s*s),l=Math.abs(e*r*s/c);n.x<a&&(l=-l);var d=Math.abs(e*r*o/c);return n.y<i&&(d=-d),{x:a+l,y:i+d}}(0,f.eW)(Mt,"intersectEllipse");var Tt=Mt;function It(t,e,r){return Tt(t,e,e,r)}(0,f.eW)(It,"intersectCircle");var Ot=It;function Bt(t,e,r,n){var a,i,s,o,c,l,d,u,h,p,g,y,f;if(a=e.y-t.y,s=t.x-e.x,c=e.x*t.y-t.x*e.y,h=a*r.x+s*r.y+c,p=a*n.x+s*n.y+c,(0===h||0===p||!zt(h,p))&&(i=n.y-r.y,o=r.x-n.x,l=n.x*r.y-r.x*n.y,d=i*t.x+o*t.y+l,u=i*e.x+o*e.y+l,(0===d||0===u||!zt(d,u))&&0!==(g=a*o-i*s)))return y=Math.abs(g/2),{x:(f=s*l-o*c)<0?(f-y)/g:(f+y)/g,y:(f=i*c-a*l)<0?(f-y)/g:(f+y)/g}}function zt(t,e){return t*e>0}(0,f.eW)(Bt,"intersectLine"),(0,f.eW)(zt,"sameSign");var Rt=Bt,At=Pt;function Pt(t,e,r){var n=t.x,a=t.y,i=[],s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;"function"===typeof e.forEach?e.forEach((function(t){s=Math.min(s,t.x),o=Math.min(o,t.y)})):(s=Math.min(s,e.x),o=Math.min(o,e.y));for(var c=n-t.width/2-s,l=a-t.height/2-o,d=0;d<e.length;d++){var u=e[d],h=e[d<e.length-1?d+1:0],p=Rt(t,r,{x:c+u.x,y:l+u.y},{x:c+h.x,y:l+h.y});p&&i.push(p)}return i.length?(i.length>1&&i.sort((function(t,e){var n=t.x-r.x,a=t.y-r.y,i=Math.sqrt(n*n+a*a),s=e.x-r.x,o=e.y-r.y,c=Math.sqrt(s*s+o*o);return i<c?-1:i===c?0:1})),i[0]):t}(0,f.eW)(Pt,"intersectPolygon");var Yt={node:Nt,circle:Ot,ellipse:Tt,polygon:At,rect:(0,f.eW)((function(t,e){var r,n,a=t.x,i=t.y,s=e.x-a,o=e.y-i,c=t.width/2,l=t.height/2;return Math.abs(o)*c>Math.abs(s)*l?(o<0&&(l=-l),r=0===o?0:l*s/o,n=l):(s<0&&(c=-c),r=c,n=0===s?0:c*o/s),{x:a+r,y:i+n}}),"intersectRect")},Ft=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r,n,a){var s,c,l,d,u,h,x,b,v,w,k,_,L,S;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=(0,y.nV)(),l=r.useHtmlLabels||(0,y.ku)(s.flowchart.htmlLabels),c=n||"node default",d=e.insert("g").attr("class",c).attr("id",r.domId||r.id),u=d.insert("g").attr("class","label").attr("style",r.labelStyle),h=void 0===r.labelText?"":"string"===typeof r.labelText?r.labelText:r.labelText[0],x=u.node(),"markdown"!==r.labelType){t.next=11;break}b=(0,p.rw)(u,(0,y.oO)((0,g.SH)(h),s),{useHtmlLabels:l,width:r.width||s.flowchart.wrappingWidth,classes:"markdown-node-label"},s),t.next=16;break;case 11:return t.t0=x,t.next=14,yt((0,y.oO)((0,g.SH)(h),s),r.labelStyle,!1,a);case 14:t.t1=t.sent,b=t.t0.appendChild.call(t.t0,t.t1);case 16:if(v=b.getBBox(),w=r.padding/2,!(0,y.ku)(s.flowchart.htmlLabels)){t.next=29;break}if(k=b.children[0],_=(0,m.Ys)(b),!(L=k.getElementsByTagName("img"))){t.next=26;break}return S=""===h.replace(/<img[^>]*>/g,"").trim(),t.next=26,Promise.all((0,o.Z)(L).map((function(t){return new Promise((function(e){function r(){if(t.style.display="flex",t.style.flexDirection="column",S){var r=s.fontSize?s.fontSize:window.getComputedStyle(document.body).fontSize,n=5*parseInt(r,10)+"px";t.style.minWidth=n,t.style.maxWidth=n}else t.style.width="100%";e(t)}(0,f.eW)(r,"setupImage"),setTimeout((function(){t.complete&&r()})),t.addEventListener("error",r),t.addEventListener("load",r)}))})));case 26:v=k.getBoundingClientRect(),_.attr("width",v.width),_.attr("height",v.height);case 29:return l?u.attr("transform","translate("+-v.width/2+", "+-v.height/2+")"):u.attr("transform","translate(0, "+-v.height/2+")"),r.centerLabel&&u.attr("transform","translate("+-v.width/2+", "+-v.height/2+")"),u.insert("rect",":first-child"),t.abrupt("return",{shapeSvg:d,bbox:v,halfPadding:w,label:u});case 33:case"end":return t.stop()}}),t)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),"labelHelper"),Xt=(0,f.eW)((function(t,e){var r=e.node().getBBox();t.width=r.width,t.height=r.height}),"updateNodeBounds");function jt(t,e,r,n){return t.insert("polygon",":first-child").attr("points",n.map((function(t){return t.x+","+t.y})).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+r/2+")")}(0,f.eW)(jt,"insertPolygonShape");var Ht=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r){var n,a,s,o,c;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.useHtmlLabels||(0,y.nV)().flowchart.htmlLabels||(r.centerLabel=!0),t.next=4,Ft(e,r,"node "+r.classes,!0);case 4:return n=t.sent,a=n.shapeSvg,s=n.bbox,o=n.halfPadding,f.cM.info("Classes = ",r.classes),(c=a.insert("rect",":first-child")).attr("rx",r.rx).attr("ry",r.ry).attr("x",-s.width/2-o).attr("y",-s.height/2-o).attr("width",s.width+r.padding).attr("height",s.height+r.padding),Xt(r,c),r.intersect=function(t){return Yt.rect(r,t)},t.abrupt("return",a);case 14:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),"note"),$t=Ht,Ut=(0,f.eW)((function(t){return t?" "+t:""}),"formatClass"),Kt=(0,f.eW)((function(t,e){return"".concat(e||"node default").concat(Ut(t.classes)," ").concat(Ut(t.class))}),"getClassesFromNode"),Vt=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r){var n,a,s,o,c,l,d,u;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(e,r,Kt(r,void 0),!0);case 2:return n=t.sent,a=n.shapeSvg,s=n.bbox,o=s.width+r.padding,c=s.height+r.padding,d=[{x:(l=o+c)/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}],f.cM.info("Question main (Circle)"),(u=jt(a,l,l,d)).attr("style",r.style),Xt(r,u),r.intersect=function(t){return f.cM.warn("Intersect called"),Yt.polygon(r,d,t)},t.abrupt("return",a);case 15:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),"question"),qt=(0,f.eW)((function(t,e){var r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),n=[{x:0,y:14},{x:14,y:0},{x:0,y:-14},{x:-14,y:0}];return r.insert("polygon",":first-child").attr("points",n.map((function(t){return t.x+","+t.y})).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(t){return Yt.circle(e,14,t)},r}),"choice"),Gt=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r){var n,a,s,o,c,l,d,u;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(e,r,Kt(r,void 0),!0);case 2:return n=t.sent,a=n.shapeSvg,s=n.bbox,4,o=s.height+r.padding,c=o/4,l=s.width+2*c+r.padding,(u=jt(a,l,o,d=[{x:c,y:0},{x:l-c,y:0},{x:l,y:-o/2},{x:l-c,y:-o},{x:c,y:-o},{x:0,y:-o/2}])).attr("style",r.style),Xt(r,u),r.intersect=function(t){return Yt.polygon(r,d,t)},t.abrupt("return",a);case 15:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),"hexagon"),Jt=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r){var n,a,s,o,c,l,d,u;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(e,r,void 0,!0);case 2:return n=t.sent,a=n.shapeSvg,s=n.bbox,2,o=s.height+2*r.padding,c=o/2,l=s.width+2*c+r.padding,d=Ct(r.directions,s,r),(u=jt(a,l,o,d)).attr("style",r.style),Xt(r,u),r.intersect=function(t){return Yt.polygon(r,d,t)},t.abrupt("return",a);case 15:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),"block_arrow"),Qt=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r){var n,a,s,o,c,l;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(e,r,Kt(r,void 0),!0);case 2:return n=t.sent,a=n.shapeSvg,s=n.bbox,o=s.width+r.padding,c=s.height+r.padding,jt(a,o,c,l=[{x:-c/2,y:0},{x:o,y:0},{x:o,y:-c},{x:-c/2,y:-c},{x:0,y:-c/2}]).attr("style",r.style),r.width=o+c,r.height=c,r.intersect=function(t){return Yt.polygon(r,l,t)},t.abrupt("return",a);case 14:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),"rect_left_inv_arrow"),te=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r){var n,a,s,o,c,l,d;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(e,r,Kt(r),!0);case 2:return n=t.sent,a=n.shapeSvg,s=n.bbox,o=s.width+r.padding,c=s.height+r.padding,(d=jt(a,o,c,l=[{x:-2*c/6,y:0},{x:o-c/6,y:0},{x:o+2*c/6,y:-c},{x:c/6,y:-c}])).attr("style",r.style),Xt(r,d),r.intersect=function(t){return Yt.polygon(r,l,t)},t.abrupt("return",a);case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),"lean_right"),ee=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r){var n,a,s,o,c,l,d;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(e,r,Kt(r,void 0),!0);case 2:return n=t.sent,a=n.shapeSvg,s=n.bbox,o=s.width+r.padding,c=s.height+r.padding,(d=jt(a,o,c,l=[{x:2*c/6,y:0},{x:o+c/6,y:0},{x:o-2*c/6,y:-c},{x:-c/6,y:-c}])).attr("style",r.style),Xt(r,d),r.intersect=function(t){return Yt.polygon(r,l,t)},t.abrupt("return",a);case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),"lean_left"),re=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r){var n,a,s,o,c,l,d;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(e,r,Kt(r,void 0),!0);case 2:return n=t.sent,a=n.shapeSvg,s=n.bbox,o=s.width+r.padding,c=s.height+r.padding,(d=jt(a,o,c,l=[{x:-2*c/6,y:0},{x:o+2*c/6,y:0},{x:o-c/6,y:-c},{x:c/6,y:-c}])).attr("style",r.style),Xt(r,d),r.intersect=function(t){return Yt.polygon(r,l,t)},t.abrupt("return",a);case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),"trapezoid"),ne=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r){var n,a,s,o,c,l,d;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(e,r,Kt(r,void 0),!0);case 2:return n=t.sent,a=n.shapeSvg,s=n.bbox,o=s.width+r.padding,c=s.height+r.padding,(d=jt(a,o,c,l=[{x:c/6,y:0},{x:o-c/6,y:0},{x:o+2*c/6,y:-c},{x:-2*c/6,y:-c}])).attr("style",r.style),Xt(r,d),r.intersect=function(t){return Yt.polygon(r,l,t)},t.abrupt("return",a);case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),"inv_trapezoid"),ae=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r){var n,a,s,o,c,l,d;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(e,r,Kt(r,void 0),!0);case 2:return n=t.sent,a=n.shapeSvg,s=n.bbox,o=s.width+r.padding,c=s.height+r.padding,(d=jt(a,o,c,l=[{x:0,y:0},{x:o+c/2,y:0},{x:o,y:-c/2},{x:o+c/2,y:-c},{x:0,y:-c}])).attr("style",r.style),Xt(r,d),r.intersect=function(t){return Yt.polygon(r,l,t)},t.abrupt("return",a);case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),"rect_right_inv_arrow"),ie=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r){var n,a,s,o,c,l,d,u,h;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(e,r,Kt(r,void 0),!0);case 2:return n=t.sent,a=n.shapeSvg,s=n.bbox,o=s.width+r.padding,l=(c=o/2)/(2.5+o/50),d=s.height+l+r.padding,u="M 0,"+l+" a "+c+","+l+" 0,0,0 "+o+" 0 a "+c+","+l+" 0,0,0 "+-o+" 0 l 0,"+d+" a "+c+","+l+" 0,0,0 "+o+" 0 l 0,"+-d,h=a.attr("label-offset-y",l).insert("path",":first-child").attr("style",r.style).attr("d",u).attr("transform","translate("+-o/2+","+-(d/2+l)+")"),Xt(r,h),r.intersect=function(t){var e=Yt.rect(r,t),n=e.x-r.x;if(0!=c&&(Math.abs(n)<r.width/2||Math.abs(n)==r.width/2&&Math.abs(e.y-r.y)>r.height/2-l)){var a=l*l*(1-n*n/(c*c));0!=a&&(a=Math.sqrt(a)),a=l-a,t.y-r.y>0&&(a=-a),e.y+=a}return e},t.abrupt("return",a);case 14:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),"cylinder"),se=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r){var n,a,s,o,c,l,d,u,h,p;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(e,r,"node "+r.classes+" "+r.class,!0);case 2:return n=t.sent,a=n.shapeSvg,s=n.bbox,o=n.halfPadding,c=a.insert("rect",":first-child"),l=r.positioned?r.width:s.width+r.padding,d=r.positioned?r.height:s.height+r.padding,u=r.positioned?-l/2:-s.width/2-o,h=r.positioned?-d/2:-s.height/2-o,c.attr("class","basic label-container").attr("style",r.style).attr("rx",r.rx).attr("ry",r.ry).attr("x",u).attr("y",h).attr("width",l).attr("height",d),r.props&&(p=new Set(Object.keys(r.props)),r.props.borders&&(le(c,r.props.borders,l,d),p.delete("borders")),p.forEach((function(t){f.cM.warn("Unknown node property ".concat(t))}))),Xt(r,c),r.intersect=function(t){return Yt.rect(r,t)},t.abrupt("return",a);case 16:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),"rect"),oe=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r){var n,a,s,o,c,l,d,u,h,p;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(e,r,"node "+r.classes,!0);case 2:return n=t.sent,a=n.shapeSvg,s=n.bbox,o=n.halfPadding,c=a.insert("rect",":first-child"),l=r.positioned?r.width:s.width+r.padding,d=r.positioned?r.height:s.height+r.padding,u=r.positioned?-l/2:-s.width/2-o,h=r.positioned?-d/2:-s.height/2-o,c.attr("class","basic cluster composite label-container").attr("style",r.style).attr("rx",r.rx).attr("ry",r.ry).attr("x",u).attr("y",h).attr("width",l).attr("height",d),r.props&&(p=new Set(Object.keys(r.props)),r.props.borders&&(le(c,r.props.borders,l,d),p.delete("borders")),p.forEach((function(t){f.cM.warn("Unknown node property ".concat(t))}))),Xt(r,c),r.intersect=function(t){return Yt.rect(r,t)},t.abrupt("return",a);case 16:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),"composite"),ce=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r){var n,a,s,o;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(e,r,"label",!0);case 2:return n=t.sent,a=n.shapeSvg,f.cM.trace("Classes = ",r.class),s=a.insert("rect",":first-child"),0,0,s.attr("width",0).attr("height",0),a.attr("class","label edgeLabel"),r.props&&(o=new Set(Object.keys(r.props)),r.props.borders&&(le(s,r.props.borders,0,0),o.delete("borders")),o.forEach((function(t){f.cM.warn("Unknown node property ".concat(t))}))),Xt(r,s),r.intersect=function(t){return Yt.rect(r,t)},t.abrupt("return",a);case 14:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),"labelRect");function le(t,e,r,n){var a=[],i=(0,f.eW)((function(t){a.push(t,0)}),"addBorder"),s=(0,f.eW)((function(t){a.push(0,t)}),"skipBorder");e.includes("t")?(f.cM.debug("add top border"),i(r)):s(r),e.includes("r")?(f.cM.debug("add right border"),i(n)):s(n),e.includes("b")?(f.cM.debug("add bottom border"),i(r)):s(r),e.includes("l")?(f.cM.debug("add left border"),i(n)):s(n),t.attr("stroke-dasharray",a.join(" "))}(0,f.eW)(le,"applyNodePropertyBorders");var de=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r){var n,a,s,o,c,l,d,u,h,p,g,x,b,v,w,k,_;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.classes?"node "+r.classes:"node default",a=e.insert("g").attr("class",n).attr("id",r.domId||r.id),s=a.insert("rect",":first-child"),o=a.insert("line"),c=a.insert("g").attr("class","label"),l=r.labelText.flat?r.labelText.flat():r.labelText,d="",d="object"===typeof l?l[0]:l,f.cM.info("Label text abc79",d,l,"object"===typeof l),t.t0=c.node(),t.next=12,yt(d,r.labelStyle,!0,!0);case 12:return t.t1=t.sent,u=t.t0.appendChild.call(t.t0,t.t1),h={width:0,height:0},(0,y.ku)((0,y.nV)().flowchart.htmlLabels)&&(p=u.children[0],g=(0,m.Ys)(u),h=p.getBoundingClientRect(),g.attr("width",h.width),g.attr("height",h.height)),f.cM.info("Text 2",l),x=l.slice(1,l.length),b=u.getBBox(),t.t2=c.node(),t.next=22,yt(x.join?x.join("<br/>"):x,r.labelStyle,!0,!0);case 22:return t.t3=t.sent,v=t.t2.appendChild.call(t.t2,t.t3),(0,y.ku)((0,y.nV)().flowchart.htmlLabels)&&(w=v.children[0],k=(0,m.Ys)(v),h=w.getBoundingClientRect(),k.attr("width",h.width),k.attr("height",h.height)),_=r.padding/2,(0,m.Ys)(v).attr("transform","translate( "+(h.width>b.width?0:(b.width-h.width)/2)+", "+(b.height+_+5)+")"),(0,m.Ys)(u).attr("transform","translate( "+(h.width<b.width?0:-(b.width-h.width)/2)+", 0)"),h=c.node().getBBox(),c.attr("transform","translate("+-h.width/2+", "+(-h.height/2-_+3)+")"),s.attr("class","outer title-state").attr("x",-h.width/2-_).attr("y",-h.height/2-_).attr("width",h.width+r.padding).attr("height",h.height+r.padding),o.attr("class","divider").attr("x1",-h.width/2-_).attr("x2",h.width/2+_).attr("y1",-h.height/2-_+b.height+_).attr("y2",-h.height/2-_+b.height+_),Xt(r,s),r.intersect=function(t){return Yt.rect(r,t)},t.abrupt("return",a);case 35:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),"rectWithTitle"),ue=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r){var n,a,s,o,c,l;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(e,r,Kt(r,void 0),!0);case 2:return n=t.sent,a=n.shapeSvg,s=n.bbox,o=s.height+r.padding,c=s.width+o/4+r.padding,l=a.insert("rect",":first-child").attr("style",r.style).attr("rx",o/2).attr("ry",o/2).attr("x",-c/2).attr("y",-o/2).attr("width",c).attr("height",o),Xt(r,l),r.intersect=function(t){return Yt.rect(r,t)},t.abrupt("return",a);case 11:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),"stadium"),he=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r){var n,a,s,o,c;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(e,r,Kt(r,void 0),!0);case 2:return n=t.sent,a=n.shapeSvg,s=n.bbox,o=n.halfPadding,(c=a.insert("circle",":first-child")).attr("style",r.style).attr("rx",r.rx).attr("ry",r.ry).attr("r",s.width/2+o).attr("width",s.width+r.padding).attr("height",s.height+r.padding),f.cM.info("Circle main"),Xt(r,c),r.intersect=function(t){return f.cM.info("Circle intersect",r,s.width/2+o,t),Yt.circle(r,s.width/2+o,t)},t.abrupt("return",a);case 12:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),"circle"),pe=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r){var n,a,s,o,c,l,d;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(e,r,Kt(r,void 0),!0);case 2:return n=t.sent,a=n.shapeSvg,s=n.bbox,o=n.halfPadding,5,c=a.insert("g",":first-child"),l=c.insert("circle"),d=c.insert("circle"),c.attr("class",r.class),l.attr("style",r.style).attr("rx",r.rx).attr("ry",r.ry).attr("r",s.width/2+o+5).attr("width",s.width+r.padding+10).attr("height",s.height+r.padding+10),d.attr("style",r.style).attr("rx",r.rx).attr("ry",r.ry).attr("r",s.width/2+o).attr("width",s.width+r.padding).attr("height",s.height+r.padding),f.cM.info("DoubleCircle main"),Xt(r,l),r.intersect=function(t){return f.cM.info("DoubleCircle intersect",r,s.width/2+o+5,t),Yt.circle(r,s.width/2+o+5,t)},t.abrupt("return",a);case 17:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),"doublecircle"),ge=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r){var n,a,s,o,c,l,d;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(e,r,Kt(r,void 0),!0);case 2:return n=t.sent,a=n.shapeSvg,s=n.bbox,o=s.width+r.padding,c=s.height+r.padding,(d=jt(a,o,c,l=[{x:0,y:0},{x:o,y:0},{x:o,y:-c},{x:0,y:-c},{x:0,y:0},{x:-8,y:0},{x:o+8,y:0},{x:o+8,y:-c},{x:-8,y:-c},{x:-8,y:0}])).attr("style",r.style),Xt(r,d),r.intersect=function(t){return Yt.polygon(r,l,t)},t.abrupt("return",a);case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),"subroutine"),ye=(0,f.eW)((function(t,e){var r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),n=r.insert("circle",":first-child");return n.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),Xt(e,n),e.intersect=function(t){return Yt.circle(e,7,t)},r}),"start"),fe=(0,f.eW)((function(t,e,r){var n=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),a=70,i=10;"LR"===r&&(a=10,i=70);var s=n.append("rect").attr("x",-1*a/2).attr("y",-1*i/2).attr("width",a).attr("height",i).attr("class","fork-join");return Xt(e,s),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(t){return Yt.rect(e,t)},n}),"forkJoin"),xe=(0,f.eW)((function(t,e){var r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),n=r.insert("circle",":first-child"),a=r.insert("circle",":first-child");return a.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),n.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),Xt(e,a),e.intersect=function(t){return Yt.circle(e,7,t)},r}),"end"),be=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r){var n,a,o,c,l,d,u,h,p,g,f,x,b,v,w,k,_,L,S,E,Z,W,C,D,N,M,T,I;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.padding/2,o=4,c=8,l=r.classes?"node "+r.classes:"node default",d=e.insert("g").attr("class",l).attr("id",r.domId||r.id),u=d.insert("rect",":first-child"),h=d.insert("line"),p=d.insert("line"),g=0,f=o,x=d.insert("g").attr("class","label"),b=0,v=null===(n=r.classData.annotations)||void 0===n?void 0:n[0],w=r.classData.annotations[0]?"\xab"+r.classData.annotations[0]+"\xbb":"",t.t0=x.node(),t.next=17,yt(w,r.labelStyle,!0,!0);case 17:return t.t1=t.sent,k=t.t0.appendChild.call(t.t0,t.t1),_=k.getBBox(),(0,y.ku)((0,y.nV)().flowchart.htmlLabels)&&(L=k.children[0],S=(0,m.Ys)(k),_=L.getBoundingClientRect(),S.attr("width",_.width),S.attr("height",_.height)),r.classData.annotations[0]&&(f+=_.height+o,g+=_.width),E=r.classData.label,void 0!==r.classData.type&&""!==r.classData.type&&((0,y.nV)().flowchart.htmlLabels?E+="&lt;"+r.classData.type+"&gt;":E+="<"+r.classData.type+">"),t.t2=x.node(),t.next=27,yt(E,r.labelStyle,!0,!0);case 27:return t.t3=t.sent,Z=t.t2.appendChild.call(t.t2,t.t3),(0,m.Ys)(Z).attr("class","classTitle"),W=Z.getBBox(),(0,y.ku)((0,y.nV)().flowchart.htmlLabels)&&(C=Z.children[0],D=(0,m.Ys)(Z),W=C.getBoundingClientRect(),D.attr("width",W.width),D.attr("height",W.height)),f+=W.height+o,W.width>g&&(g=W.width),N=[],r.classData.members.forEach(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e){var n,a,s,c,l,d;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getDisplayDetails(),a=n.displayText,(0,y.nV)().flowchart.htmlLabels&&(a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;")),t.t0=x.node(),t.next=6,yt(a,n.cssStyle?n.cssStyle:r.labelStyle,!0,!0);case 6:t.t1=t.sent,s=t.t0.appendChild.call(t.t0,t.t1),c=s.getBBox(),(0,y.ku)((0,y.nV)().flowchart.htmlLabels)&&(l=s.children[0],d=(0,m.Ys)(s),c=l.getBoundingClientRect(),d.attr("width",c.width),d.attr("height",c.height)),c.width>g&&(g=c.width),f+=c.height+o,N.push(s);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),f+=c,M=[],r.classData.methods.forEach(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e){var n,a,s,c,l,d;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getDisplayDetails(),a=n.displayText,(0,y.nV)().flowchart.htmlLabels&&(a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;")),t.t0=x.node(),t.next=6,yt(a,n.cssStyle?n.cssStyle:r.labelStyle,!0,!0);case 6:t.t1=t.sent,s=t.t0.appendChild.call(t.t0,t.t1),c=s.getBBox(),(0,y.ku)((0,y.nV)().flowchart.htmlLabels)&&(l=s.children[0],d=(0,m.Ys)(s),c=l.getBoundingClientRect(),d.attr("width",c.width),d.attr("height",c.height)),c.width>g&&(g=c.width),f+=c.height+o,M.push(s);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),f+=c,v&&(T=(g-_.width)/2,(0,m.Ys)(k).attr("transform","translate( "+(-1*g/2+T)+", "+-1*f/2+")"),b=_.height+o),I=(g-W.width)/2,(0,m.Ys)(Z).attr("transform","translate( "+(-1*g/2+I)+", "+(-1*f/2+b)+")"),b+=W.height+o,h.attr("class","divider").attr("x1",-g/2-a).attr("x2",g/2+a).attr("y1",-f/2-a+c+b).attr("y2",-f/2-a+c+b),b+=c,N.forEach((function(t){var e;(0,m.Ys)(t).attr("transform","translate( "+-g/2+", "+(-1*f/2+b+c/2)+")");var r=null===t||void 0===t?void 0:t.getBBox();b+=(null!==(e=null===r||void 0===r?void 0:r.height)&&void 0!==e?e:0)+o})),b+=c,p.attr("class","divider").attr("x1",-g/2-a).attr("x2",g/2+a).attr("y1",-f/2-a+c+b).attr("y2",-f/2-a+c+b),b+=c,M.forEach((function(t){var e;(0,m.Ys)(t).attr("transform","translate( "+-g/2+", "+(-1*f/2+b)+")");var r=null===t||void 0===t?void 0:t.getBBox();b+=(null!==(e=null===r||void 0===r?void 0:r.height)&&void 0!==e?e:0)+o})),u.attr("style",r.style).attr("class","outer title-state").attr("x",-g/2-a).attr("y",-f/2-a).attr("width",g+r.padding).attr("height",f+r.padding),Xt(r,u),r.intersect=function(t){return Yt.rect(r,t)},t.abrupt("return",d);case 55:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),"class_box"),ve={rhombus:Vt,composite:oe,question:Vt,rect:se,labelRect:ce,rectWithTitle:de,choice:qt,circle:he,doublecircle:pe,stadium:ue,hexagon:Gt,block_arrow:Jt,rect_left_inv_arrow:Qt,lean_right:te,lean_left:ee,trapezoid:re,inv_trapezoid:ne,rect_right_inv_arrow:ae,cylinder:ie,start:ye,end:xe,note:$t,subroutine:ge,fork:fe,join:fe,class_box:be},me={},we=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r,n){var a,s,o;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.link){t.next=8;break}return"sandbox"===(0,y.nV)().securityLevel?o="_top":r.linkTarget&&(o=r.linkTarget||"_blank"),a=e.insert("svg:a").attr("xlink:href",r.link).attr("target",o),t.next=5,ve[r.shape](a,r,n);case 5:s=t.sent,t.next=12;break;case 8:return t.next=10,ve[r.shape](e,r,n);case 10:s=t.sent,a=s;case 12:return r.tooltip&&s.attr("title",r.tooltip),r.class&&s.attr("class","node default "+r.class),me[r.id]=a,r.haveCallback&&me[r.id].attr("class",me[r.id].attr("class")+" clickable"),t.abrupt("return",a);case 17:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),"insertNode"),ke=(0,f.eW)((function(t){var e=me[t.id];f.cM.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");var r=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+r-t.width/2)+", "+(t.y-t.height/2-8)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),r}),"positionNode");function _e(t,e){var r,n,a,i,s,o,c,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=t,u="default";((null===d||void 0===d||null===(r=d.classes)||void 0===r?void 0:r.length)||0)>0&&(u=(null!==(c=null===d||void 0===d?void 0:d.classes)&&void 0!==c?c:[]).join(" "));u+=" flowchart-label";var h,p=0,f="";switch(d.type){case"round":p=5,f="rect";break;case"composite":p=0,f="composite",h=0;break;case"square":case"group":default:f="rect";break;case"diamond":f="question";break;case"hexagon":f="hexagon";break;case"block_arrow":f="block_arrow";break;case"odd":case"rect_left_inv_arrow":f="rect_left_inv_arrow";break;case"lean_right":f="lean_right";break;case"lean_left":f="lean_left";break;case"trapezoid":f="trapezoid";break;case"inv_trapezoid":f="inv_trapezoid";break;case"circle":f="circle";break;case"ellipse":f="ellipse";break;case"stadium":f="stadium";break;case"subroutine":f="subroutine";break;case"cylinder":f="cylinder";break;case"doublecircle":f="doublecircle"}var x=(0,g.be)(null!==(n=null===d||void 0===d?void 0:d.styles)&&void 0!==n?n:[]),b=d.label,v=null!==(a=d.size)&&void 0!==a?a:{width:0,height:0,x:0,y:0};return{labelStyle:x.labelStyle,shape:f,labelText:b,rx:p,ry:p,class:u,style:x.style,id:d.id,directions:d.directions,width:v.width,height:v.height,x:v.x,y:v.y,positioned:l,intersect:void 0,type:d.type,padding:null!==(i=null!==(s=h)&&void 0!==s?s:null===(o=(0,y.iE)())||void 0===o||null===(o=o.block)||void 0===o?void 0:o.padding)&&void 0!==i?i:0}}function Le(t,e,r){return Se.apply(this,arguments)}function Se(){return(Se=(0,s.Z)((0,i.Z)().mark((function t(e,r,n){var a,s,o,c,l;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("group"!==(a=_e(r,n,!1)).type){t.next=3;break}return t.abrupt("return");case 3:return s=(0,y.iE)(),t.next=6,we(e,a,{config:s});case 6:o=t.sent,c=o.node().getBBox(),(l=n.getBlock(a.id)).size={width:c.width,height:c.height,x:0,y:0,node:o},n.setBlock(l),o.remove();case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ee(t,e,r){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,s.Z)((0,i.Z)().mark((function t(e,r,n){var a,s;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=_e(r,n,!0),"space"===n.getBlock(a.id).type){t.next=8;break}return s=(0,y.iE)(),t.next=6,we(e,a,{config:s});case 6:r.intersect=null===a||void 0===a?void 0:a.intersect,ke(a);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function We(t,e,r,n){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,s.Z)((0,i.Z)().mark((function t(e,r,n,a){var s,o,l;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=(0,c.Z)(r),t.prev=1,s.s();case 3:if((o=s.n()).done){t.next=12;break}return l=o.value,t.next=7,a(e,l,n);case 7:if(!l.children){t.next=10;break}return t.next=10,We(e,l.children,n,a);case 10:t.next=3;break;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),s.e(t.t0);case 17:return t.prev=17,s.f(),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[1,14,17,20]])})))).apply(this,arguments)}function De(t,e,r){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,s.Z)((0,i.Z)().mark((function t(e,r,n){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,We(e,r,n,Le);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Me(t,e,r){return Te.apply(this,arguments)}function Te(){return(Te=(0,s.Z)((0,i.Z)().mark((function t(e,r,n){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,We(e,r,n,Ee);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ie(t,e,r,n,a){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,s.Z)((0,i.Z)().mark((function t(e,r,n,a,s){var o,d,u,h,p,g,y,f,x,b,v,m;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(o=new w.k({multigraph:!0,compound:!0})).setGraph({rankdir:"TB",nodesep:10,ranksep:10,marginx:8,marginy:8}),d=(0,c.Z)(n);try{for(d.s();!(u=d.n()).done;)(h=u.value).size&&o.setNode(h.id,{width:h.size.width,height:h.size.height,intersect:h.intersect})}catch(i){d.e(i)}finally{d.f()}p=(0,c.Z)(r),t.prev=5,p.s();case 7:if((g=p.n()).done){t.next=23;break}if(!(y=g.value).start||!y.end){t.next=21;break}if(f=a.getBlock(y.start),x=a.getBlock(y.end),null===f||void 0===f||!f.size||null===x||void 0===x||!x.size){t.next=21;break}if(b=f.size,v=x.size,m=[{x:b.x,y:b.y},{x:b.x+(v.x-b.x)/2,y:b.y+(v.y-b.y)/2},{x:v.x,y:v.y}],Zt(e,{v:y.start,w:y.end,name:y.id},(0,l.Z)((0,l.Z)({},y),{},{arrowTypeEnd:y.arrowTypeEnd,arrowTypeStart:y.arrowTypeStart,points:m,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"}),void 0,"block",o,s),!y.label){t.next=21;break}return t.next=20,wt(e,(0,l.Z)((0,l.Z)({},y),{},{label:y.label,labelStyle:"stroke: #333; stroke-width: 1.5px;fill:none;",arrowTypeEnd:y.arrowTypeEnd,arrowTypeStart:y.arrowTypeStart,points:m,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"}));case 20:_t((0,l.Z)((0,l.Z)({},y),{},{x:m[1].x,y:m[1].y}),{originalPath:m});case 21:t.next=7;break;case 23:t.next=28;break;case 25:t.prev=25,t.t0=t.catch(5),p.e(t.t0);case 28:return t.prev=28,p.f(),t.finish(28);case 31:case"end":return t.stop()}}),t,null,[[5,25,28,31]])})))).apply(this,arguments)}(0,f.eW)(_e,"getNodeFromBlock"),(0,f.eW)(Le,"calculateBlockSize"),(0,f.eW)(Ee,"insertBlockPositioned"),(0,f.eW)(We,"performOperations"),(0,f.eW)(De,"calculateBlockSizes"),(0,f.eW)(Me,"insertBlocks"),(0,f.eW)(Ie,"insertEdges");var Be=(0,f.eW)((function(t,e){return e.db.getClasses()}),"getClasses"),ze=(0,f.eW)(function(){var t=(0,s.Z)((0,i.Z)().mark((function t(e,r,n,a){var s,o,c,l,d,u,h,p,g,x,b,v,w,k,_,L,S;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=(0,y.iE)(),o=s.securityLevel,c=s.block,l=a.db,"sandbox"===o&&(d=(0,m.Ys)("#i"+r)),u="sandbox"===o?(0,m.Ys)(d.nodes()[0].contentDocument.body):(0,m.Ys)("body"),h="sandbox"===o?u.select('[id="'.concat(r,'"]')):(0,m.Ys)('[id="'.concat(r,'"]')),at(h,["point","circle","cross"],a.type,r),p=l.getBlocks(),g=l.getBlocksFlat(),x=l.getEdges(),b=h.insert("g").attr("class","block"),t.next=13,De(b,p,l);case 13:return v=ut(l),t.next=16,Me(b,p,l);case 16:return t.next=18,Ie(b,x,g,l,r);case 18:v&&(w=v,k=Math.max(1,Math.round(w.width/w.height*.125)),_=w.height+k+10,L=w.width+10,S=c.useMaxWidth,(0,y.v2)(h,_,L,!!S),f.cM.debug("Here Bounds",v,w),h.attr("viewBox","".concat(w.x-5," ").concat(w.y-5," ").concat(w.width+10," ").concat(w.height+10)));case 19:case"end":return t.stop()}}),t)})));return function(e,r,n,a){return t.apply(this,arguments)}}(),"draw"),Re={parser:_,db:Q,renderer:{draw:ze,getClasses:Be},styles:et}},6758:function(t,e,r){r.d(e,{G:function(){return n}});var n=(0,r(1025).eW)((function(){return"\n  /* Font Awesome icon styling - consolidated */\n  .label-icon {\n    display: inline-block;\n    height: 1em;\n    overflow: visible;\n    vertical-align: -0.125em;\n  }\n  \n  .node .label-icon path {\n    fill: currentColor;\n    stroke: revert;\n    stroke-width: revert;\n  }\n"}),"getIconStyles")}}]);
//# sourceMappingURL=135.0ae9908d.chunk.js.map