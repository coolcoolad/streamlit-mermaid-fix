"use strict";(self.webpackChunkmermaid_viewer=self.webpackChunkmermaid_viewer||[]).push([[886],{5375:function(t,e,a){function n(t,e){var a,n,r;t.accDescr&&(null===(a=e.setAccDescription)||void 0===a||a.call(e,t.accDescr));t.accTitle&&(null===(n=e.setAccTitle)||void 0===n||n.call(e,t.accTitle));t.title&&(null===(r=e.setDiagramTitle)||void 0===r||r.call(e,t.title))}a.d(e,{A:function(){return n}}),(0,a(1025).eW)(n,"populateCommonDb")},5886:function(t,e,a){a.r(e),a.d(e,{diagram:function(){return P}});var n,r=a(4165),i=a(5861),o=a(9439),c=a(7762),l=a(1413),s=a(5671),d=a(3144),u=a(6680),p=a(5375),h=a(8535),b=a(6699),k=a(1025),f=a(1529),v=b.vZ.packet,g=(n=function(){function t(){(0,s.Z)(this,t),this.packet=[],this.setAccTitle=b.GN,this.getAccTitle=b.eu,this.setDiagramTitle=b.g2,this.getDiagramTitle=b.Kr,this.getAccDescription=b.Mx,this.setAccDescription=b.U$}return(0,d.Z)(t,[{key:"getConfig",value:function(){var t=(0,h.Rb)((0,l.Z)((0,l.Z)({},v),(0,b.iE)().packet));return t.showBits&&(t.paddingY+=10),t}},{key:"getPacket",value:function(){return this.packet}},{key:"pushWord",value:function(t){t.length>0&&this.packet.push(t)}},{key:"clear",value:function(){(0,b.ZH)(),this.packet=[]}}]),t}(),(0,k.eW)(n,"PacketDB"),n),w=(0,k.eW)((function(t,e){(0,p.A)(t,e);var a,n=-1,r=[],i=1,l=e.getConfig().bitsPerRow,s=(0,c.Z)(t.blocks);try{for(s.s();!(a=s.n()).done;){var d,u,h,b,f,v=a.value,g=v.start,w=v.end,m=v.bits,x=v.label;if(void 0!==g&&void 0!==w&&w<g)throw new Error("Packet block ".concat(g," - ").concat(w," is invalid. End must be greater than start."));if(null!==(d=g)&&void 0!==d||(g=n+1),g!==n+1)throw new Error("Packet block ".concat(g," - ").concat(null!==(f=w)&&void 0!==f?f:g," is not contiguous. It should start from ").concat(n+1,"."));if(0===m)throw new Error("Packet block ".concat(g," is invalid. Cannot have a zero bit field."));for(null!==(u=w)&&void 0!==u||(w=g+(null!==(h=m)&&void 0!==h?h:1)-1),null!==(b=m)&&void 0!==b||(m=w-g+1),n=w,k.cM.debug("Packet block ".concat(g," - ").concat(n," with label ").concat(x));r.length<=l+1&&e.getPacket().length<1e4;){var C=y({start:g,end:w,bits:m,label:x},i,l),B=(0,o.Z)(C,2),W=B[0],Z=B[1];if(r.push(W),W.end+1===i*l&&(e.pushWord(r),r=[],i++),!Z)break;g=Z.start,w=Z.end,m=Z.bits,x=Z.label}}}catch(P){s.e(P)}finally{s.f()}e.pushWord(r)}),"populate"),y=(0,k.eW)((function(t,e,a){if(void 0===t.start)throw new Error("start should have been set during first phase");if(void 0===t.end)throw new Error("end should have been set during first phase");if(t.start>t.end)throw new Error("Block start ".concat(t.start," is greater than block end ").concat(t.end,"."));if(t.end+1<=e*a)return[t,void 0];var n=e*a-1,r=e*a;return[{start:t.start,end:n,label:t.label,bits:n-t.start},{start:r,end:t.end,label:t.label,bits:t.end-r}]}),"getNextFittingBlock"),m={parser:{yy:void 0},parse:(0,k.eW)(function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){var a,n,i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.Qc)("packet",e);case 2:if(n=t.sent,(i=null===(a=m.parser)||void 0===a?void 0:a.yy)instanceof g){t.next=6;break}throw new Error("parser.parser?.yy was not a PacketDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");case 6:k.cM.debug(n),w(n,i);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),"parse")},x=(0,k.eW)((function(t,e,a,n){var r=n.db,i=r.getConfig(),l=i.rowHeight,s=i.paddingY,d=i.bitWidth,p=i.bitsPerRow,h=r.getPacket(),k=r.getDiagramTitle(),f=l+s,v=f*(h.length+1)-(k?0:l),g=d*p+2,w=(0,u.P)(e);w.attr("viewbox","0 0 ".concat(g," ").concat(v)),(0,b.v2)(w,v,g,i.useMaxWidth);var y,m=(0,c.Z)(h.entries());try{for(m.s();!(y=m.n()).done;){var x=(0,o.Z)(y.value,2),B=x[0],W=x[1];C(w,W,B,i)}}catch(Z){m.e(Z)}finally{m.f()}w.append("text").text(k).attr("x",g/2).attr("y",v-f/2).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","packetTitle")}),"draw"),C=(0,k.eW)((function(t,e,a,n){var r,i=n.rowHeight,o=n.paddingX,l=n.paddingY,s=n.bitWidth,d=n.bitsPerRow,u=n.showBits,p=t.append("g"),h=a*(i+l)+l,b=(0,c.Z)(e);try{for(b.s();!(r=b.n()).done;){var k=r.value,f=k.start%d*s+1,v=(k.end-k.start+1)*s-o;if(p.append("rect").attr("x",f).attr("y",h).attr("width",v).attr("height",i).attr("class","packetBlock"),p.append("text").attr("x",f+v/2).attr("y",h+i/2).attr("class","packetLabel").attr("dominant-baseline","middle").attr("text-anchor","middle").text(k.label),u){var g=k.end===k.start,w=h-2;p.append("text").attr("x",f+(g?v/2:0)).attr("y",w).attr("class","packetByte start").attr("dominant-baseline","auto").attr("text-anchor",g?"middle":"start").text(k.start),g||p.append("text").attr("x",f+v).attr("y",w).attr("class","packetByte end").attr("dominant-baseline","auto").attr("text-anchor","end").text(k.end)}}}catch(y){b.e(y)}finally{b.f()}}),"drawWord"),B={draw:x},W={byteFontSize:"10px",startByteColor:"black",endByteColor:"black",labelColor:"black",labelFontSize:"12px",titleColor:"black",titleFontSize:"14px",blockStrokeColor:"black",blockStrokeWidth:"1",blockFillColor:"#efefef"},Z=(0,k.eW)((function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).packet,e=(0,h.Rb)(W,t);return"\n\t.packetByte {\n\t\tfont-size: ".concat(e.byteFontSize,";\n\t}\n\t.packetByte.start {\n\t\tfill: ").concat(e.startByteColor,";\n\t}\n\t.packetByte.end {\n\t\tfill: ").concat(e.endByteColor,";\n\t}\n\t.packetLabel {\n\t\tfill: ").concat(e.labelColor,";\n\t\tfont-size: ").concat(e.labelFontSize,";\n\t}\n\t.packetTitle {\n\t\tfill: ").concat(e.titleColor,";\n\t\tfont-size: ").concat(e.titleFontSize,";\n\t}\n\t.packetBlock {\n\t\tstroke: ").concat(e.blockStrokeColor,";\n\t\tstroke-width: ").concat(e.blockStrokeWidth,";\n\t\tfill: ").concat(e.blockFillColor,";\n\t}\n\t")}),"styles"),P={parser:m,get db(){return new g},renderer:B,styles:Z}}}]);
//# sourceMappingURL=886.848a458c.chunk.js.map